var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,o=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&s(e,a,t[a]);if(n)for(var a of n(t))i.call(t,a)&&s(e,a,t[a]);return e},l=(e,n)=>t(e,a(n));import{i as c,G as d,g as p,a as u,P as m,R as h,m as f,u as E,L as v,b as g,c as y,d as b,e as x,f as k,h as I,j as S,k as w,r as P,s as N,l as C,C as L,n as T,o as A,p as _,T as O,M as B,q as M,I as R,t as $,N as j,v as F,w as U,x as J,y as V,S as D,z,A as q,B as G,D as H,E as W,F as Y,H as K,J as Q,K as X,O as Z,Q as ee,U as te,V as ae,W as ne,X as re,Y as ie,Z as se,_ as oe,$ as le,a0 as ce,a1 as de,a2 as pe,a3 as ue,a4 as me,a5 as he,a6 as fe,a7 as Ee,a8 as ve,a9 as ge}from"./vendor.74f0df22.js";let ye;const be={},xe=function(e,t){if(!t||0===t.length)return e();if(void 0===ye){const e=document.createElement("link").relList;ye=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if((e=`/podcaster/${e}`)in be)return;be[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":ye,t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e()))};const ke={apiKey:"AIzaSyCFeT-GJW_TNkH3GRkEchgBSSxd8IxWq-8",authDomain:"podcaster-ca277.firebaseapp.com",databaseURL:"https://podcaster-ca277-default-rtdb.firebaseio.com/",projectId:"podcaster-ca277",storageBucket:"podcaster-ca277.appspot.com",messagingSenderId:"1060072167958",appId:"1:1060072167958:web:b8071b3de130430422f337",measurementId:"G-NHG3XF04JF"};if(void 0===ke)throw new Error("Invalid firebase config.");c(ke);const Ie={google:new d},Se=p(),we=u(),Pe=new m("RBE7535YHVY2VFHJPUDJ","DZmpt7J^vKzbeNwd4EvQUtGQj7wwd6Eq#vwChUL4"),Ne=h.createContext(void 0);function Ce({children:e}){const t={client:Pe};return h.createElement(Ne.Provider,{value:t},e)}function Le(){const e=h.useContext(Ne);if(void 0===e)throw new Error("usePodcastIndex must be used within a PodcastIndexProvider");return e}const Te=f({blackText:{color:"black"}});function Ae(){const e=Te(),t=E();return h.createElement(h.Fragment,null,h.createElement(v,{component:"nav","aria-label":"home search subscriptions settings"},h.createElement(g,{component:y,to:"/",selected:"/"===t.pathname,className:e.blackText},h.createElement(b,null,h.createElement(x,{color:"primary"})),h.createElement(k,{primary:"Home"})),h.createElement(g,{component:y,to:"/search",selected:t.pathname.includes("/search"),className:e.blackText},h.createElement(b,null,h.createElement(I,{color:"primary"})),h.createElement(k,{primary:"Search"})),h.createElement(g,{component:y,to:"/subscriptions",selected:"/subscriptions"===t.pathname,className:e.blackText},h.createElement(b,null,h.createElement(S,{color:"primary"})),h.createElement(k,{primary:"Subscriptions"})),h.createElement(g,{component:y,to:"/settings",selected:"/settings"===t.pathname,className:e.blackText},h.createElement(b,null,h.createElement(w,{color:"primary"})),h.createElement(k,{primary:"Settings"}))))}function _e(e,t){return""!==t&&null!==t?t:e}function Oe(e){const t=new Date(0);t.setSeconds(e);const a=t.toISOString().substr(11,8);return"00"===a.substr(0,2)?a.substr(3):a}function Be(e,t){return t instanceof Map?{dataType:"Map",value:[...t]}:t}function Me(e,t){return"object"==typeof t&&null!==t&&"Map"===t.dataType?new Map(t.value):t}function Re(e){return void 0!==e}function $e(e){try{if(!function(e){return null!==e}(JSON.parse(e,Me)))return!1}catch(t){return!1}return!0}function je(e){return void 0!==e.id}function Fe(e){return void 0!==e}function Ue(e,t){if(null!==t){const a=P(we,`users/${t.uid}/controls`);N(a,e)}localStorage.setItem("controls",JSON.stringify(e))}function Je(e,t){if(null!==t){const a=P(we,`users/${t.uid}/subscriptions`);N(a,e)}localStorage.setItem("subscriptions",JSON.stringify(e))}function Ve(e,t){if(null!==t){const a=P(we,`users/${t.uid}/activeEpisode`);N(a,e)}localStorage.setItem("activeEpisode",JSON.stringify(e))}const De=f({endItems:{display:"flex",justifyContent:"flex-end",columnGap:"24px",alignItems:"center"},rounded:{borderRadius:"4px"},play:{display:"flex",alignItems:"center"},text:{display:"-webkit-box","-webkit-line-clamp":"4","-webkit-box-orient":"vertical",overflow:"hidden"},episodeLink:{paddingBottom:"8px"},header:{display:"flex",alignItems:"center",padding:16,paddingBottom:0}});function ze(e,t,a){if(void 0!==e&&e instanceof Map&&e.has(t)){const n=e.get(t)||0;return Math.round(n/a*100)}return 0}function qe({episodeId:e,activeEpisode:t,setActiveEpisode:a,isPlaying:n,setIsPlaying:r,playbackStates:i}){async function s(){void 0!==m&&(void 0!==f&&(a(f),Ve(f,Se.currentUser)),r(!n))}const o=De(),l=E(),c=C(),{client:d}=Le(),[p,u]=L.exports.useState(null);const{data:m}=T(`episodeById/${p}`,(async function(){if(null!==p){return await d.episodeById(p)}})),f=null==m?void 0:m.episode;return L.exports.useEffect((()=>{!async function(){if(void 0!==e)u(e);else if(void 0!==c.episodeId){const e=parseInt(c.episodeId);u(e)}}()}),[]),void 0!==f?function(e){const a=(r=e.description,document.createRange().createContextualFragment(r));var r;return h.createElement(A,null,h.createElement("div",{className:o.header},h.createElement(_,{container:!0,spacing:1,alignItems:"center",justifyContent:"space-between",wrap:"nowrap"},h.createElement(_,{item:!0,xs:9},l.pathname.includes("episode")?h.createElement(O,{variant:"subtitle2"},e.title):h.createElement(B,{component:y,variant:"subtitle2",to:`/episode/${e.id}`},e.title)),h.createElement(_,{item:!0,xs:3,className:o.endItems},h.createElement(O,{variant:"body2",color:"textSecondary",component:"p"},`${Math.round(e.duration/60)} mins`),h.createElement(O,{variant:"body2",color:"textSecondary",component:"p"},new Date(1e3*e.datePublished).toLocaleDateString())))),h.createElement(M,null,h.createElement(_,{container:!0,spacing:1,alignItems:"center",justifyContent:"space-between",wrap:"nowrap"},h.createElement(_,{item:!0,xs:9},h.createElement(O,{variant:"body2",color:"textSecondary",component:"p",className:l.pathname.includes("episode")?void 0:o.text},a.textContent||"")),h.createElement(_,{item:!0,xs:3,className:o.endItems},l.pathname.includes("podcast")?h.createElement(R,{publicId:_e(e.image,e.feedImage),type:"fetch",className:o.rounded,alt:e.title},h.createElement($,{width:"auto",height:48,crop:"fill",quality:"auto"})):h.createElement(j,{to:`/podcast/${e.feedId}`},h.createElement(R,{publicId:_e(e.image,e.feedImage),type:"fetch",className:o.rounded,alt:e.title},h.createElement($,{width:"auto",height:48,crop:"fill",quality:"auto"}))),h.createElement(F,{onClick:s,color:"secondary","aria-label":`${n?"pause":"play"}_${e.id}`},n&&(null==t?void 0:t.id)===e.id?h.createElement(U,{fontSize:"large"}):h.createElement(J,{fontSize:"large"}))))),h.createElement(V,{variant:"determinate",value:ze(i,e.id,e.duration),"aria-label":`playback_${e.title.replaceAll(" ","_")}`}))}(f):h.createElement(A,null,h.createElement("div",{className:o.header},h.createElement(_,{container:!0,spacing:1,alignItems:"center",justifyContent:"space-between",wrap:"nowrap"},h.createElement(_,{item:!0,xs:9},h.createElement(D,{variant:"rect",height:20})),h.createElement(_,{item:!0,xs:3,className:o.endItems},h.createElement(D,{variant:"rect",width:40,height:20}),h.createElement(D,{variant:"rect",width:40,height:20})))),h.createElement(M,null,h.createElement(_,{container:!0,spacing:1,alignItems:"center",justifyContent:"space-between",wrap:"nowrap"},h.createElement(_,{item:!0,xs:9},h.createElement(D,{variant:"rect",height:80})),h.createElement(_,{item:!0,xs:3,className:o.endItems},h.createElement(D,{variant:"rect",width:48,height:48}),h.createElement(D,{variant:"circle",width:35,height:35})))))}function Ge({episodes:e,activeEpisode:t,setActiveEpisode:a,isPlaying:n,setIsPlaying:r,playbackStates:i}){return e.length>0?h.createElement(_,{container:!0,spacing:3,direction:"column",alignItems:"stretch"},e.map(((e,s)=>h.createElement(_,{item:!0,xs:!0,component:"article",key:`${s} ${e.id}`},h.createElement(qe,{episodeId:e.id,playbackStates:i,setIsPlaying:r,isPlaying:n,activeEpisode:t,setActiveEpisode:a}))))):h.createElement(O,null,"Your feed is currently empty - try subscribing to a podcast!")}var He=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ge});const We=z({container:{display:"grid",gridTemplateColumns:"3fr 1fr",gridTemplateRows:"1fr",gap:"0px 24px",gridAutoFlow:"row",gridTemplateAreas:'"content icon"',alignItems:"center"},podcast:{marginBottom:"48px"},content:{gridArea:"content",display:"-webkit-box","-webkit-line-clamp":"4","-webkit-box-orient":"vertical",overflow:"hidden"},icon:{gridArea:"icon",display:"flex",alignItems:"center",justifyContent:"center"},rounded:{borderRadius:"4px"},header:{display:"flex",alignItems:"center",padding:16,paddingBottom:0},skeletonHeader:{padding:16,paddingBottom:0}});function Ye({podcastId:e,activeEpisode:t,setActiveEpisode:a,isPlaying:n,setIsPlaying:r,playbackStates:i,subscriptions:s,setSubscriptions:o}){const l=We(),{client:c}=Le(),d=C(),p=E(),[u,m]=L.exports.useState(void 0),[f,v]=L.exports.useState(void 0),g=T(`podcastById/${u}`,(async function(){if(void 0!==u){const e=await c.podcastById(u);return v(e.feed.id),e.feed}})),b=null==g?void 0:g.data,x=f||(null==b?void 0:b.id),k=T(`episodesByFeedId/${x}`,(async function(){if(void 0!==x){return(await c.episodesByFeedId(x)).items}})),I=null==k?void 0:k.data;function S(){return void 0!==b&&s.map((e=>e.id)).includes(b.id)}async function w(){S()?async function(){if(void 0!==b){const e=s.filter((e=>e.id!==b.id));o(e),Je(e,Se.currentUser)}}():async function(){if(void 0!==b){const e=await c.podcastById(b.id),t=[...s,e.feed];o(t),Je(t,Se.currentUser)}}()}return L.exports.useEffect((()=>{!async function(){void 0!==e&&m(e),void 0!==d.podcastId&&m(parseInt(d.podcastId))}()}),[]),void 0!==b?h.createElement(h.Fragment,null,void 0!==b?h.createElement(A,{component:"article",className:p.pathname.includes("podcast")?l.podcast:""},h.createElement("div",{className:l.header},p.pathname.includes("podcast")?h.createElement(O,{variant:"h5",component:"h2"},b.title):h.createElement(B,{component:y,variant:"h5",to:`/podcast/${b.id}`},b.title)),h.createElement(M,{className:l.container},h.createElement(h.Fragment,null,h.createElement("div",{className:l.content},h.createElement(O,{variant:"body2",color:"textSecondary",component:"p"},b.description)),h.createElement("div",{className:l.icon},h.createElement(R,{publicId:_e(b.artwork,b.image),type:"fetch",className:l.rounded,alt:b.title},h.createElement($,{width:"auto",height:80,crop:"fill",quality:"auto"}))))),h.createElement(q,null,h.createElement(G,{size:"small",color:"primary",onClick:w},S()?"Unsubscribe":"Subscribe"))):null,p.pathname.includes("podcast")&&void 0!==I?h.createElement(h.Fragment,null,h.createElement(H,{display:"flex",flexGrow:1,justifyContent:"space-between",alignItems:"flex-end",marginBottom:"8px"},h.createElement(O,{variant:"h6",component:"h3"},"Episodes")),h.createElement(Ge,{episodes:I,playbackStates:i,activeEpisode:t,setActiveEpisode:a,isPlaying:n,setIsPlaying:r})):null):h.createElement(h.Fragment,null,h.createElement(A,{component:"article",className:p.pathname.includes("podcast")?l.podcast:""},h.createElement("div",{className:W(l.skeletonHeader,l.container)},h.createElement(h.Fragment,null,h.createElement("div",{className:l.content},h.createElement(D,{variant:"rect",height:32})),h.createElement("div",{className:l.icon}))),h.createElement(M,{className:l.container},h.createElement(h.Fragment,null,h.createElement("div",{className:l.content},h.createElement(D,{variant:"rect",height:80})),h.createElement("div",{className:l.icon},h.createElement(D,{variant:"rect",height:80,width:80})))),h.createElement(q,null,h.createElement(D,{variant:"rect",height:22,width:90,style:{margin:"8px"}}))),void 0!==I&&p.pathname.includes("podcast")?h.createElement(h.Fragment,null,h.createElement(O,{variant:"h6",component:"h3"},"Episodes"),h.createElement(Ge,{episodes:I,playbackStates:i,activeEpisode:t,setActiveEpisode:a,isPlaying:n,setIsPlaying:r})):null)}const Ke=f((e=>({rounded:{borderRadius:"4px"},emptyIcon:{backgroundColor:e.palette.primary.light,borderRadius:"4px"},title:{display:"-webkit-box","-webkit-line-clamp":"3","-webkit-box-orient":"vertical",overflow:"hidden",color:e.palette.primary.dark,textDecoration:"none"},author:{display:"-webkit-box","-webkit-line-clamp":"1","-webkit-box-orient":"vertical",overflow:"hidden",color:e.palette.primary.main,textDecoration:"none"}})));function Qe({activeEpisode:e,subscriptions:t}){const a=Ke();return h.createElement(h.Fragment,null,void 0!==e?h.createElement(j,{to:`/episode/${e.id}`},h.createElement(R,{publicId:_e(e.image,e.feedImage),type:"fetch",className:a.rounded,alt:e.title},h.createElement($,{width:"auto",height:56,crop:"fill",quality:"auto"}))):h.createElement("img",{height:"56px",width:"56px",className:a.emptyIcon,alt:"empty icon"}),void 0!==e?h.createElement(H,{paddingLeft:"16px"},h.createElement(B,{gutterBottom:!0,variant:"subtitle2",className:a.title,component:y,to:`/episode/${e.id}`},e.title),h.createElement(B,{variant:"caption",color:"textSecondary",component:y,to:`/podcast/${e.feedId}`,className:a.author},void 0!==e?function(e,t){const a=e.find((e=>e.id===t));return void 0!==a?a.author:""}(t,e.feedId):"")):null)}function Xe(){const e=Y();return h.createElement(h.Fragment,null,h.createElement(F,{onClick:()=>e.goBack(),"aria-label":"navigate_back"},h.createElement(K,null)),h.createElement(F,{onClick:()=>e.goForward(),"aria-label":"navigate_forward"},h.createElement(Q,null)))}const Ze=f((e=>({button:{display:"flex",justifyContent:"space-between",flexGrow:1},headerText:{paddingLeft:"8px"}})));function et(){const e=Ze();return h.createElement(G,{color:"primary",className:e.button,component:j,to:"/"},h.createElement(O,{variant:"h6",component:"h1",className:e.headerText},"podcaster"),h.createElement("img",{src:"/podcaster/assets/cat.bd0d0283.svg",height:"24px",width:"auto",alt:"cat"}))}class tt extends L.exports.Component{constructor(){super(...arguments),this.audioEl=h.createRef(),this.onError=e=>{var t,a;return null==(a=(t=this.props).onError)?void 0:a.call(t,e)},this.onCanPlay=e=>{var t,a;return null==(a=(t=this.props).onCanPlay)?void 0:a.call(t,e)},this.onCanPlayThrough=e=>{var t,a;return null==(a=(t=this.props).onCanPlayThrough)?void 0:a.call(t,e)},this.onPlay=e=>{var t,a;this.setListenTrack(),null==(a=(t=this.props).onPlay)||a.call(t,e)},this.onAbort=e=>{var t,a;this.clearListenTrack(),null==(a=(t=this.props).onAbort)||a.call(t,e)},this.onEnded=e=>{var t,a;this.clearListenTrack(),null==(a=(t=this.props).onEnded)||a.call(t,e)},this.onPause=e=>{var t,a;this.clearListenTrack(),null==(a=(t=this.props).onPause)||a.call(t,e)},this.onSeeked=e=>{var t,a;null==(a=(t=this.props).onSeeked)||a.call(t,e)},this.onLoadedMetadata=e=>{var t,a;null==(a=(t=this.props).onLoadedMetadata)||a.call(t,e)},this.onVolumeChanged=e=>{var t,a;null==(a=(t=this.props).onVolumeChanged)||a.call(t,e)}}componentDidMount(){const e=this.audioEl.current;e&&(this.updateVolume(this.props.volume),e.addEventListener("error",this.onError),e.addEventListener("canplay",this.onCanPlay),e.addEventListener("canplaythrough",this.onCanPlayThrough),e.addEventListener("play",this.onPlay),e.addEventListener("abort",this.onAbort),e.addEventListener("ended",this.onEnded),e.addEventListener("pause",this.onPause),e.addEventListener("seeked",this.onSeeked),e.addEventListener("loadedmetadata",this.onLoadedMetadata),e.addEventListener("volumechange",this.onVolumeChanged))}componentWillUnmount(){const e=this.audioEl.current;e&&(e.removeEventListener("error",this.onError),e.removeEventListener("canplay",this.onCanPlay),e.removeEventListener("canplaythrough",this.onCanPlayThrough),e.removeEventListener("play",this.onPlay),e.removeEventListener("abort",this.onAbort),e.removeEventListener("ended",this.onEnded),e.removeEventListener("pause",this.onPause),e.removeEventListener("seeked",this.onSeeked),e.removeEventListener("loadedmetadata",this.onLoadedMetadata),e.removeEventListener("volumechange",this.onVolumeChanged))}componentDidUpdate(e){this.updateVolume(this.props.volume)}setListenTrack(){if(!this.listenTracker){const e=this.props.listenInterval;this.listenTracker=window.setInterval((()=>{var e,t;this.audioEl.current&&(null==(t=(e=this.props).onListen)||t.call(e,this.audioEl.current.currentTime))}),e)}}updateVolume(e){const t=this.audioEl.current;null!==t&&"number"==typeof e&&e!==(null==t?void 0:t.volume)&&(t.volume=e)}clearListenTrack(){this.listenTracker&&(clearInterval(this.listenTracker),delete this.listenTracker)}render(){const e=this.props.children||h.createElement("p",null,"Your browser does not support the ",h.createElement("code",null,"audio")," element."),t=!(!1===this.props.controls),a=this.props.title?this.props.title:this.props.src,n={};return this.props.controlsList&&(n.controlsList=this.props.controlsList),h.createElement("audio",o({autoPlay:this.props.autoPlay,className:`react-audio-player ${this.props.className}`,controls:t,crossOrigin:this.props.crossOrigin,id:this.props.id,loop:this.props.loop,muted:this.props.muted,preload:this.props.preload,ref:this.audioEl,src:this.props.src,style:this.props.style,title:a},n),e)}}tt.defaultProps={autoPlay:!1,children:null,className:"",controls:!1,controlsList:"",id:"",listenInterval:1e4,loop:!1,muted:!1,onAbort:()=>{},onCanPlay:()=>{},onCanPlayThrough:()=>{},onEnded:()=>{},onError:()=>{},onListen:()=>{},onPause:()=>{},onPlay:()=>{},onSeeked:()=>{},onVolumeChanged:()=>{},onLoadedMetadata:()=>{},preload:"metadata",style:{},title:"",volume:1},tt.propTypes={autoPlay:X.bool,children:X.element,className:X.string,controls:X.bool,controlsList:X.string,crossOrigin:X.string,id:X.string,listenInterval:X.number,loop:X.bool,muted:X.bool,onAbort:X.func,onCanPlay:X.func,onCanPlayThrough:X.func,onEnded:X.func,onError:X.func,onListen:X.func,onLoadedMetadata:X.func,onPause:X.func,onPlay:X.func,onSeeked:X.func,onVolumeChanged:X.func,preload:X.oneOf(["","none","metadata","auto"]),src:X.string,style:X.objectOf(X.string),title:X.string,volume:X.number};function at({playerRef:e,controls:t,src:a,onTickedCallback:n}){return h.createElement(tt,{ref:e,autoPlay:!1,muted:t.isMuted,volume:t.volume,src:a,loop:t.isRepeat,listenInterval:1e3,onListen:n})}const nt=f((e=>({container:{display:"grid",gridTemplateColumns:"minmax(0, 9fr) minmax(0, 2fr)",gridTemplateRows:"minmax(0, 2fr) minmax(0, 1fr)",gap:"0px 8px",gridAutoFlow:"row",gridTemplateAreas:'"playback volume" "time volume"',height:"100%"},playback:{gridArea:"playback",display:"flex",justifyContent:"center",alignItems:"center",margin:"0px 80px"},volume:{gridArea:"volume",display:"flex",justifyContent:"center",alignItems:"center"},time:{gridArea:"time",alignItems:"center",margin:"0px 80px",display:"flex",justifyContent:"center"},playbackTimer:{marginInline:"24px",width:"35vw"},muteButton:{marginRight:"16px"},muteButtonActive:{marginRight:"16px",backgroundColor:e.palette.primary.light},shuffleButtonActive:{backgroundColor:e.palette.primary.light},repeatButtonActive:{backgroundColor:e.palette.primary.light}})));function rt({playbackStates:e,setPlaybackStates:t,activeEpisode:a,setActiveEpisode:n,isPlaying:r,setIsPlaying:i,episodes:s}){const c=nt(),d=L.exports.useRef(null);function p(){var e;if(null!==d&&null!==d.current){const t=null==(e=d.current)?void 0:e.audioEl.current;if(null!==t)return t}}L.exports.useEffect((()=>{const e=p();void 0!==e&&(r?e.play():e.pause())}),[r]);const[u,m]=L.exports.useState({isMuted:!1,isShuffle:!1,isRepeat:!1,volume:.15});L.exports.useEffect((()=>{Se.onAuthStateChanged((e=>{null!==e?(async function(e){const a=P(we,`users/${e.uid}/playback`);oe(a).then((e=>{if(e.exists()){const a=e.val();if($e(a)){const e=JSON.parse(a,Me);t(e)}}}))}(e),async function(e){const t=P(we,`users/${e.uid}/controls`);oe(t).then((e=>{if(e.exists()){const t=e.val();Fe(t)&&m(t)}}))}(e)):(async function(){const e=localStorage.getItem("playback");if(null!==e&&$e(e)){const a=JSON.parse(e,Me);t(a)}}(),async function(){const e=localStorage.getItem("controls");if(null!==e&&Fe(JSON.parse(e))){const t=JSON.parse(e);m(t)}}())}))}),[]),L.exports.useEffect((()=>{if(v()){const e=p();void 0!==e&&(e.currentTime=g())}}),[a]);const[f,E]=L.exports.useState(!1);function v(){return void 0!==a&&e.has(a.id)}function g(){if(v()&&void 0!==a){const t=e.get(a.id);if(void 0!==t)return t}return 0}const y=Z(e,1e4);function b(n){if(void 0!==a)if(e instanceof Map&&void 0!==a){const r=new Map(e);r.set(a.id,n),t(r)}else{const e=new Map([[a.id,n]]);t(e)}}function x(e){return s.map((e=>e.id)).findIndex((t=>t===e))}function k(e){const t=x(e);if(u.isShuffle){const e=s.map(((e,t)=>t)).filter((e=>e!==t)),r=(a=e)[Math.floor(Math.random()*a.length)];if(void 0!==s[r]){const e=s[r];n(e),Ve(e,Se.currentUser)}}else{const e=t<s.length?t+1:s.length-1;if(t!==e&&void 0!==s[e]){const t=s[e];n(t),Ve(t,Se.currentUser)}}var a}return L.exports.useEffect((()=>{!function(e,t){if(e.size>0){if(null!==t){const a=P(we,`users/${t.uid}/playback`);N(a,JSON.stringify(e,Be))}localStorage.setItem("playback",JSON.stringify(e,Be))}}(e,Se.currentUser)}),[y]),h.createElement("div",{className:c.container},h.createElement("div",{className:c.playback},h.createElement(F,{onClick:function(){const e=l(o({},u),{isShuffle:!u.isShuffle});m(e),Ue(e,Se.currentUser)},"aria-label":u.isShuffle?"shuffle_off":"shuffle",className:u.isShuffle?c.shuffleButtonActive:void 0},h.createElement(ee,null)),h.createElement(F,{"aria-label":"play_previous",onClick:()=>void 0!==a?function(e){const t=x(e),a=t>0?t-1:0;if(t!==a&&void 0!==s[a]){const e=s[a];n(e),Ve(e,Se.currentUser)}}(a.id):null},h.createElement(te,null)),h.createElement(F,{color:"secondary","aria-label":r?"pause":"play",onClick:()=>void 0!==a?i(!r):null},r?h.createElement(U,{fontSize:"large"}):h.createElement(J,{fontSize:"large"})),h.createElement(F,{"aria-label":"play_next",onClick:()=>void 0!==a?k(a.id):null},h.createElement(ae,null)),h.createElement(F,{"aria-label":u.isRepeat?"no_repeat":"repeat",onClick:function(){const e=l(o({},u),{isRepeat:!u.isRepeat});m(e),Ue(e,Se.currentUser)},className:u.isRepeat?c.repeatButtonActive:void 0},h.createElement(ne,null))),h.createElement("div",{className:c.volume},h.createElement(F,{"aria-label":u.isMuted?"unmute":"mute",onClick:function(){const e=l(o({},u),{isMuted:!u.isMuted});m(e),Ue(e,Se.currentUser)},className:u.isMuted?c.muteButtonActive:c.muteButton},u.isMuted?h.createElement(re,null):h.createElement(ie,null)),h.createElement(se,{value:u.volume,getAriaValueText:()=>`volume_is_${100*u.volume}%`,"aria-label":"volume-slider",onChange:(e,t)=>function(e){if("number"==typeof e){const t=l(o({},u),{volume:e});m(t),Ue(t,Se.currentUser)}}(t),min:0,step:.01,max:1})),h.createElement("div",{className:c.time},h.createElement(at,{playerRef:d,controls:u,src:null==a?void 0:a.enclosureUrl,playing:r,onTickedCallback:function(e){f||b(e)}}),h.createElement(O,{component:"label",variant:"subtitle2",style:{color:"hsl(0deg 0% 0% / 71%)"}},Oe(g())),h.createElement(se,{color:"primary",className:c.playbackTimer,value:g(),getAriaValueText:()=>void 0!==a?`current_time_is_${g()}_seconds`:"","aria-label":"time-slider",onChange:(e,t)=>function(e){const t=p();void 0!==t&&"number"==typeof e&&(E(!0),t.currentTime=e,E(!1),b(e))}(t),min:0,step:1,max:void 0!==a?a.duration:0}),h.createElement(O,{component:"label",variant:"subtitle2",style:{color:"hsl(0deg 0% 0% / 71%)"}},Oe(void 0!==a?a.duration:0))))}const it=L.exports.lazy((()=>xe((()=>Promise.resolve().then((function(){return He}))),void 0))),st=L.exports.lazy((()=>xe((()=>import("./Subscriptions.793d5b80.js")),["assets/Subscriptions.793d5b80.js","assets/vendor.74f0df22.js"]))),ot=L.exports.lazy((()=>xe((()=>import("./Login.6c1d546a.js")),["assets/Login.6c1d546a.js","assets/vendor.74f0df22.js"]))),lt=L.exports.lazy((()=>xe((()=>import("./Search.014f5c90.js")),["assets/Search.014f5c90.js","assets/vendor.74f0df22.js"]))),ct=f((e=>({container:{backgroundColor:e.palette.primary.light,display:"grid",gridTemplateColumns:"minmax(208px, 256px) minmax(720px, 1fr)",gridTemplateRows:"minmax(24px, 48px) minmax(600px, 1fr) minmax(72px, 88px)",gridAutoFlow:"row",gridTemplateAreas:'"logo header header" "navigation content content" "art controls controls"',height:"100%"},logo:{gridArea:"logo",display:"flex"},header:{gridArea:"header",display:"flex",alignItems:"center",padding:"0px 24px",paddingRight:"280px"},navigation:{gridArea:"navigation",marginBottom:"8px"},content:{gridArea:"content",overflowY:"auto",overflowX:"hidden",padding:"0px 24px",paddingRight:"280px",marginTop:"8px",marginBottom:"8px",minWidth:"720px"},controls:{gridArea:"controls",padding:"0px 24px",backgroundColor:e.palette.info.main},art:{gridArea:"art",paddingLeft:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e.palette.info.main}})));function dt(){const e=ct(),t=E(),{client:a}=Le(),[n,r]=L.exports.useState([]),[i,s]=L.exports.useState(new Map),[o,l]=L.exports.useState(void 0),[c,d]=L.exports.useState(!1),[p,u]=L.exports.useState(10),m=n.map((e=>e.id)),f=T(`episodesByFeedId/${m.join(",")}/${p}`,(async function(){if(m.length>0){return(await a.episodesByFeedId(m,{max:p,fulltext:!0})).items}})),v=null==f?void 0:f.data;const g=void 0!==v?v:[];return L.exports.useEffect((()=>{Se.onAuthStateChanged((e=>{null!==e?(console.log("User detected."),async function(e){try{const t=P(we,`users/${e.uid}/subscriptions`),a=await oe(t);if(a.exists()){const e=a.val();Re(e)&&r(e)}}catch(t){console.error(t)}}(e),async function(e){try{const t=P(we,`users/${e.uid}/activeEpisode`),a=await oe(t);if(a.exists()){const e=a.val();je(e)&&l(e)}}catch(t){console.error(t)}}(e)):(async function(){const e=localStorage.getItem("subscriptions");if(null!==e&&Re(JSON.parse(e))){const t=JSON.parse(e);r(t)}}(),async function(){const e=localStorage.getItem("activeEpisode");if(null!==e&&je(JSON.parse(e))){const t=JSON.parse(e);l(t)}}())}))}),[]),h.createElement("div",{className:e.container},h.createElement("header",{className:e.logo},h.createElement(et,null)),h.createElement("header",{className:e.header},h.createElement(Xe,null)),h.createElement("nav",{className:e.navigation},h.createElement(Ae,null)),h.createElement("main",{className:e.content},h.createElement(L.exports.Suspense,{fallback:null},h.createElement(le,{location:t},h.createElement(ce,{exact:!0,path:"/"},h.createElement(it,{episodes:g,playbackStates:i,activeEpisode:o,setActiveEpisode:l,isPlaying:c,setIsPlaying:d})),h.createElement(ce,{path:"/search/:term"},h.createElement(lt,{subscriptions:n,setSubscriptions:r,playbackStates:i,activeEpisode:o,setActiveEpisode:l,isPlaying:c,setIsPlaying:d})),h.createElement(ce,{path:"/search/:term"},h.createElement(lt,{subscriptions:n,setSubscriptions:r,playbackStates:i,activeEpisode:o,setActiveEpisode:l,isPlaying:c,setIsPlaying:d})),h.createElement(ce,{path:"/search"},h.createElement(lt,{subscriptions:n,setSubscriptions:r,playbackStates:i,activeEpisode:o,setActiveEpisode:l,isPlaying:c,setIsPlaying:d})),h.createElement(ce,{exact:!0,path:"/episode/:episodeId"},h.createElement(qe,{episodeId:void 0,playbackStates:i,activeEpisode:o,setActiveEpisode:l,isPlaying:c,setIsPlaying:d})),h.createElement(ce,{exact:!0,path:"/subscriptions"},h.createElement(st,{subscriptions:n,setSubscriptions:r,playbackStates:i,activeEpisode:o,setActiveEpisode:l,isPlaying:c,setIsPlaying:d})),h.createElement(ce,{exact:!0,path:"/settings"},h.createElement(ot,null)),h.createElement(ce,{exact:!0,path:"/podcast/:podcastId"},h.createElement(Ye,{podcastId:void 0,subscriptions:n,setSubscriptions:r,playbackStates:i,activeEpisode:o,setActiveEpisode:l,isPlaying:c,setIsPlaying:d}))))),h.createElement("footer",{className:e.controls},h.createElement(rt,{episodes:g,playbackStates:i,activeEpisode:o,isPlaying:c,setIsPlaying:d,setPlaybackStates:s,setActiveEpisode:l})),h.createElement("footer",{className:e.art},h.createElement(Qe,{activeEpisode:o,subscriptions:n})))}const pt=de({palette:{primary:{contrastText:pe[50],dark:pe[900],main:pe[700],light:pe[50]},secondary:{dark:ue[800],main:ue[700],light:ue[100]},info:{main:pe[100]}},overrides:{MuiSkeleton:{rect:{borderRadius:"4px"}}}}),ut=new me({defaultOptions:{queries:{cacheTime:18e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchInterval:!1,staleTime:18e5}}});he.render(h.createElement(h.StrictMode,null,h.createElement(fe,{basename:"/podcaster"},h.createElement(Ee,{client:ut},h.createElement(ve,{cloudName:"dqg6dtafg",style:{height:"100%"}},h.createElement(Ce,null,h.createElement(ge,{theme:pt},h.createElement(dt,null))))))),document.getElementById("root"));export{Ye as P,Se as a,Ie as b,Le as u};
