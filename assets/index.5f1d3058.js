var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,c=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&i(e,a,t[a]);if(n)for(var a of n(t))r.call(t,a)&&i(e,a,t[a]);return e},o=(e,n)=>t(e,a(n));import{i as l,G as d,g as m,a as u,P as p,R as g,m as f,u as E,L as y,b as v,c as b,d as x,e as h,f as S,h as I,j as k,k as w,l as P,r as N,s as C,n as A,C as T,o as B,p as F,q as R,t as O,T as M,M as j,B as J,I as U,v as $,w as z,x as L,y as D,z as G,A as H,D as q,E as V,F as W,H as Y,J as K,K as Q,N as X,O as Z,Q as _,S as ee,U as te,V as ae,W as ne,X as se,Y as re,Z as ie,_ as ce,$ as oe,a0 as le,a1 as de,a2 as me,a3 as ue,a4 as pe,a5 as ge,a6 as fe,a7 as Ee,a8 as ye,a9 as ve,aa as be,ab as xe}from"./vendor.4ce5159d.js";l({apiKey:"AIzaSyCFeT-GJW_TNkH3GRkEchgBSSxd8IxWq-8",authDomain:"podcaster-ca277.firebaseapp.com",databaseURL:"https://podcaster-ca277-default-rtdb.firebaseio.com/",projectId:"podcaster-ca277",storageBucket:"podcaster-ca277.appspot.com",messagingSenderId:"1060072167958",appId:"1:1060072167958:web:b8071b3de130430422f337",measurementId:"G-NHG3XF04JF"});const he={google:new d},Se=m(),Ie=u(),ke=new p("RBE7535YHVY2VFHJPUDJ","DZmpt7J^vKzbeNwd4EvQUtGQj7wwd6Eq#vwChUL4"),we=g.createContext(void 0);function Pe({children:e}){const t={client:ke};return g.createElement(we.Provider,{value:t},e)}function Ne(){const e=g.useContext(we);if(void 0===e)throw new Error("usePodcastIndex must be used within a PodcastIndexProvider");return e}const Ce=f({blackText:{color:"black"}});var Ae=g.memo((function(){const e=Ce(),t=E();return g.createElement(g.Fragment,null,g.createElement(y,{component:"nav","aria-label":"home search subscriptions settings"},g.createElement(v,{component:b,to:"/",selected:"/"===t.pathname,className:e.blackText},g.createElement(x,null,g.createElement(h,{color:"primary"})),g.createElement(S,{primary:"Home"})),g.createElement(v,{component:b,to:"/search",selected:t.pathname.includes("/search"),className:e.blackText},g.createElement(x,null,g.createElement(I,{color:"primary"})),g.createElement(S,{primary:"Search"})),g.createElement(v,{component:b,to:"/subscriptions",selected:"/subscriptions"===t.pathname,className:e.blackText},g.createElement(x,null,g.createElement(k,{color:"primary"})),g.createElement(S,{primary:"Subscriptions"})),g.createElement(v,{component:b,to:"/settings",selected:"/settings"===t.pathname,className:e.blackText},g.createElement(x,null,g.createElement(w,{color:"primary"})),g.createElement(S,{primary:"Settings"}))))}));function Te(e,t){return""!==t&&null!==t?t:e}function Be(e){const t=new Date(0);t.setSeconds(e);const a=t.toISOString().substr(11,8);return"00"===a.substr(0,2)?a.substr(3):a}function Fe(e,t){return t instanceof Map?{dataType:"Map",value:[...t]}:t}function Re(e,t){return"object"==typeof t&&null!==t&&"Map"===t.dataType?new Map(t.value):t}function Oe(e){return void 0!==e}function Me(e){try{if(!function(e){return null!==e}(JSON.parse(e,Re)))return!1}catch(t){return!1}return!0}function je(e){return void 0!==e.id}function Je(e){return void 0!==e}function Ue(e,t){if(null!==t){const a=N(Ie,`users/${t.uid}/controls`);C(a,e)}localStorage.setItem("controls",JSON.stringify(e))}function $e(e,t){if(null!==t){const a=N(Ie,`users/${t.uid}/subscriptions`);C(a,e)}localStorage.setItem("subscriptions",JSON.stringify(e))}function ze(e,t){if(null!==t){const a=N(Ie,`users/${t.uid}/activeEpisode`);C(a,e)}localStorage.setItem("activeEpisode",JSON.stringify(e))}const Le=f({endItems:{display:"flex",justifyContent:"flex-end",columnGap:"24px"},rounded:{borderRadius:"8px"},play:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"},text:{display:"-webkit-box","-webkit-line-clamp":"4","-webkit-box-orient":"vertical",overflow:"hidden"}});function De(e,t,a){if(void 0!==e&&e instanceof Map&&e.has(t)){const n=e.get(t)||0;return Math.round(n/a*100)}return 0}const Ge=({html:e})=>{const t=T.exports.useRef(null);return T.exports.useEffect((()=>{const{current:a}=t,n=document.createRange().createContextualFragment(e);return a.appendChild(n),()=>{a.textContent=""}}),[e]),g.createElement("div",{ref:t})};function He({episodeId:e,activeEpisode:t,setActiveEpisode:a,isPlaying:n,setIsPlaying:s,playbackStates:r}){const i=Le(),c=E(),o=A(),{client:l}=Ne(),[d,m]=T.exports.useState(null);const{isLoading:u,isError:p,data:f,error:y}=B(`episodeById/${d}`,(async function(){if(null!==d){return await l.episodeById(d)}})),v=null==f?void 0:f.episode;return T.exports.useEffect((()=>{!async function(){void 0!==e?m(e):o.hasOwnProperty("episodeId")&&m(o.episodeId)}()}),[]),void 0!==v?g.createElement(F,{component:"article"},g.createElement(R,null,g.createElement(O,{container:!0,spacing:1,alignItems:"center",justifyContent:"space-between",wrap:"nowrap"},g.createElement(O,{item:!0,xs:9},c.pathname.includes("episode")?g.createElement(T.exports.Fragment,null,g.createElement(M,{gutterBottom:!0,variant:"subtitle2"},v.title),(x=v.description,g.createElement(Ge,{html:x}))):g.createElement(T.exports.Fragment,null,g.createElement(j,{component:b,gutterBottom:!0,variant:"subtitle2",to:`/episode/${v.id}`},v.title),g.createElement(M,{variant:"body2",color:"textSecondary",component:"p",className:i.text},function(e){return document.createRange().createContextualFragment(e).textContent||""}(v.description)))),g.createElement(O,{item:!0,xs:3,className:i.endItems},g.createElement(T.exports.Fragment,null,g.createElement(J,{className:i.play},g.createElement(M,{variant:"body2",color:"textSecondary",component:"p"},new Date(1e3*v.datePublished).toLocaleDateString()),g.createElement("img",{src:Te(v.image,v.feedImage),height:"48px",width:"auto",className:i.rounded})),g.createElement(J,{className:i.play},g.createElement(M,{variant:"body2",color:"textSecondary",component:"p"},`${Math.round(v.duration/60)} mins`),g.createElement(U,{onClick:async function(){void 0!==f&&(void 0!==v&&(a(v),ze(v,Se.currentUser)),s(!n))},color:"secondary"},n&&(null==t?void 0:t.id)===v.id?g.createElement($,{fontSize:"large"}):g.createElement(z,{fontSize:"large"}))))))),g.createElement(L,{variant:"determinate",value:De(r,v.id,v.duration)})):null;var x}var qe=g.memo((function({episodes:e,activeEpisode:t,setActiveEpisode:a,isPlaying:n,setIsPlaying:s,playbackStates:r}){return Ne(),g.createElement(O,{container:!0,spacing:3,direction:"column",alignItems:"stretch"},e.map((e=>g.createElement(O,{item:!0,xs:!0,key:e.id},g.createElement(He,{episodeId:e.id,playbackStates:r,setIsPlaying:s,isPlaying:n,activeEpisode:t,setActiveEpisode:a})))))}));const Ve=D({container:{display:"grid",gridTemplateColumns:"minmax(600px, 3fr) minmax(88px, 96px)",gridTemplateRows:"1fr",gap:"0px 24px",gridAutoFlow:"row",gridTemplateAreas:'"content icon"',alignItems:"center"},podcast:{marginBottom:"48px"},content:{gridArea:"content"},icon:{gridArea:"icon",display:"flex",alignItems:"center",justifyContent:"center"},rounded:{borderRadius:"8px"}});var We=g.memo((function({podcastId:e,activeEpisode:t,setActiveEpisode:a,isPlaying:n,setIsPlaying:s,playbackStates:r,subscriptions:i,setSubscriptions:c}){const o=Ve(),{client:l}=Ne(),d=A(),m=E(),[u,p]=T.exports.useState(void 0),[f,y]=T.exports.useState(void 0),v=B(`podcastById/${u}`,(async function(){if(void 0!==u){const e=await l.podcastById(u);return y(e.feed.id),e.feed}})),x=null==v?void 0:v.data,h=B(`episodesByFeedId/${f}`,(async function(){if(void 0!==f&&void 0!==x){return(await l.episodesByFeedId(f)).items}})),S=null==h?void 0:h.data;function I(){return void 0!==x&&i.map((e=>e.id)).includes(x.id)}return T.exports.useEffect((()=>{!async function(){void 0!==e&&p(e),d.hasOwnProperty("podcastId")&&p(d.podcastId)}()}),[]),g.createElement(T.exports.Fragment,null,void 0!==x?g.createElement(F,{component:"article",className:m.pathname.includes("podcast")?o.podcast:""},g.createElement(R,{className:o.container},g.createElement(T.exports.Fragment,null,g.createElement("div",{className:o.content},m.pathname.includes("podcast")?g.createElement(M,{variant:"h5",component:"h5",gutterBottom:!0},x.title):g.createElement(j,{component:b,gutterBottom:!0,variant:"h5",to:`/podcast/${x.id}`},x.title),g.createElement(M,{variant:"body2",color:"textSecondary",component:"p"},x.description)),g.createElement("div",{className:o.icon},g.createElement("img",{className:o.rounded,src:Te(x.artwork,x.image),height:"80px",width:"auto"})))),g.createElement(G,null,g.createElement(H,{size:"small",color:"primary",onClick:async function(){I()?async function(){if(void 0!==x){const e=i.filter((e=>e.id!==x.id));c(e),$e(e,Se.currentUser)}}():async function(){if(void 0!==x){const e=await l.podcastById(x.id),t=[...i,e.feed];c(t),$e(t,Se.currentUser)}}()}},I()?"Unsubscribe":"Subscribe"))):null,void 0!==S&&m.pathname.includes("podcast")?g.createElement(T.exports.Fragment,null,g.createElement(M,{variant:"h6",component:"h6"},"Episodes"),g.createElement(qe,{episodes:S,playbackStates:r,activeEpisode:t,setActiveEpisode:a,isPlaying:n,setIsPlaying:s})):null)}));const Ye=f({search:{width:"75%"}});var Ke=g.memo((function({subscriptions:e,setSubscriptions:t,activeEpisode:a,setActiveEpisode:n,isPlaying:s,setIsPlaying:r,playbackStates:i}){const c=Ye(),o=q(),l=A(),{client:d}=Ne(),[m,u]=V("",500),[p,f]=T.exports.useState("");T.exports.useEffect((()=>{if(l.hasOwnProperty("term")&&""!==l.term&&l.term!==p){const e=l.term;f(e),u(e)}}),[]);const E=B(`search/${m}`,(async function(){if(""!==m){o.push(`/search/${m}`);return(await d.search(m)).feeds}})),y=null==E?void 0:E.data;return g.createElement(g.Fragment,null,g.createElement(J,{display:"flex",flexGrow:1,alignItems:"center",justifyContent:"space-between",marginBottom:"32px"},g.createElement(W,{id:"standard-search",label:"Search",type:"search",value:p,onChange:e=>{f(e.target.value),u(e.target.value)},className:c.search}),g.createElement(H,{variant:"contained",color:"primary",startIcon:g.createElement(I,null),onClick:()=>{u(p)}},"Search")),g.createElement(O,{container:!0,spacing:3,direction:"column",alignItems:"stretch"},void 0!==y&&y.map((c=>g.createElement(O,{item:!0,key:c.id,component:"article"},g.createElement(We,{podcastId:c.id,subscriptions:e,setSubscriptions:t,playbackStates:i,activeEpisode:a,setActiveEpisode:n,isPlaying:s,setIsPlaying:r}))))))}));var Qe=g.memo((function({subscriptions:e,setSubscriptions:t,activeEpisode:a,setActiveEpisode:n,isPlaying:s,setIsPlaying:r,playbackStates:i}){return g.createElement(O,{container:!0,spacing:3,direction:"column",alignItems:"stretch"},e.map((c=>g.createElement(O,{item:!0,key:c.id},g.createElement(We,{podcastId:c.id,subscriptions:e,setSubscriptions:t,playbackStates:i,activeEpisode:a,setActiveEpisode:n,isPlaying:s,setIsPlaying:r})))))})),Xe=({disabled:e})=>g.createElement("div",{style:{marginRight:8,background:e?"#fff":"#eee",padding:8,borderRadius:2,display:"flex",alignItems:"center"}},g.createElement("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},g.createElement("g",{fill:"#000",fillRule:"evenodd"},g.createElement("path",{d:"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z",fill:"#EA4335"}),g.createElement("path",{d:"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z",fill:"#4285F4"}),g.createElement("path",{d:"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z",fill:"#FBBC05"}),g.createElement("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z",fill:"#34A853"}),g.createElement("path",{fill:"none",d:"M0 0h18v18H0z"}))));const Ze=f((e=>({googleButton:{color:"#fff",padding:"8px",backgroundColor:"#3367D6",textTransform:"none","&:hover":{backgroundColor:"#1b53e2"}},defaultButton:{padding:"8px",textTransform:"none"},textStyle:{paddingRight:10,fontWeight:500,paddingLeft:0,paddingTop:10,paddingBottom:10}})));function _e(){const e=Ze(),t=q(),[a,n]=T.exports.useState(!1);return g.createElement(g.Fragment,null,g.createElement("h1",null,"Welcome to Podcaster"),null===Se.currentUser?g.createElement("p",null,"Please sign in to sync your data to your account."):g.createElement("p",null,"Your data is being synced to your account."),g.createElement(O,{container:!0,direction:"column",spacing:2,alignItems:"stretch"},null===Se.currentUser?g.createElement(g.Fragment,null,g.createElement(O,{item:!0},g.createElement(H,{variant:"contained",color:"secondary",disabled:a,onClick:()=>{return e=he.google,n(!0),Q(Se,e).then((e=>{e.user,t.push("/")})).catch((e=>{e.code,e.message,e.email})),void n(!1);var e},className:e.googleButton,startIcon:g.createElement(Xe,{disabled:a})},"Sign in with Google")),g.createElement(O,{item:!0},g.createElement(H,{variant:"contained",color:"secondary",disabled:a,onClick:()=>(n(!0),X(Se).then((e=>{e.user,t.push("/")})).catch((e=>{e.code,e.message,e.email})),void n(!1)),className:e.defaultButton,startIcon:g.createElement("div",{style:{marginRight:8,padding:5,borderRadius:2,display:"flex",alignItems:"center"}},g.createElement(Y,null))},"Sign in anonymously"))):g.createElement(O,{item:!0},g.createElement(H,{variant:"contained",color:"primary",disabled:a,onClick:()=>{Z(Se)},className:e.defaultButton,startIcon:g.createElement("div",{style:{marginRight:8,padding:5,borderRadius:2,display:"flex",alignItems:"center"}},g.createElement(K,null))},"Log out"))))}const et=f((e=>({rounded:{borderRadius:"8px"},title:{display:"-webkit-box","-webkit-line-clamp":"3","-webkit-box-orient":"vertical",overflow:"hidden"},author:{display:"-webkit-box","-webkit-line-clamp":"1","-webkit-box-orient":"vertical",overflow:"hidden"}})));function tt({activeEpisode:e,subscriptions:t}){const a=et();return g.createElement(g.Fragment,null,void 0!==e?g.createElement("img",{src:Te(e.image,e.feedImage),height:"56px",width:"auto",className:a.rounded}):g.createElement("img",{height:"56px",width:"56px",className:a.rounded}),g.createElement(J,{paddingLeft:"16px"},g.createElement(M,{gutterBottom:!0,variant:"subtitle2",component:"h6",className:a.title},void 0!==e?e.title:""),g.createElement(M,{variant:"caption",color:"textSecondary",component:"p",className:a.author},void 0!==e?function(e,t){const a=e.find((e=>e.id===t));return a?a.author:""}(t,e.feedId):"")))}function at(){const e=q();return g.createElement(g.Fragment,null,g.createElement(U,{onClick:()=>e.goBack()},g.createElement(_,null)),g.createElement(U,{onClick:()=>e.goForward()},g.createElement(ee,null)))}const nt=f((e=>({button:{display:"flex",justifyContent:"space-between",flexGrow:1},headerText:{paddingLeft:"8px"}})));function st(){const e=nt();return g.createElement(H,{color:"primary",className:e.button,component:b,to:"/"},g.createElement(M,{variant:"h6",component:"h1",className:e.headerText},"podcaster"),g.createElement("img",{src:"/podcaster/assets/cat.bd0d0283.svg",height:"24px",width:"auto",alt:"cat"}))}function rt({playerRef:e,controls:t,src:a,onTickedCallback:n}){return g.createElement(te,{ref:e,autoPlay:!1,muted:t.isMuted,volume:t.volume,src:a,loop:t.isRepeat,listenInterval:1e3,onListen:n})}const it=f((e=>({container:{display:"grid",gridTemplateColumns:"minmax(0, 9fr) minmax(0, 2fr)",gridTemplateRows:"minmax(0, 2fr) minmax(0, 1fr)",gap:"0px 8px",gridAutoFlow:"row",gridTemplateAreas:'"playback volume" "time volume"',height:"100%"},playback:{gridArea:"playback",display:"flex",justifyContent:"center",alignItems:"center",margin:"0px 80px"},volume:{gridArea:"volume",display:"flex",justifyContent:"center",alignItems:"center"},time:{gridArea:"time",alignItems:"center",margin:"0px 80px",display:"flex"},playbackTimer:{marginInline:"24px"},muteButton:{marginRight:"16px"}})));function ct({playbackStates:e,setPlaybackStates:t,activeEpisode:a,setActiveEpisode:n,isPlaying:s,setIsPlaying:r,episodes:i}){const l=it(),d=T.exports.useRef(null);function m(){if(null!==d&&null!==d.current){return d.current.audioEl.current}}T.exports.useEffect((()=>{const e=m();void 0!==e&&(s?e.play():e.pause())}),[s]);const[u,p]=T.exports.useState({isMuted:!1,isShuffle:!1,isRepeat:!1,volume:.15});T.exports.useEffect((()=>{Se.onAuthStateChanged((e=>{null!==e?(async function(e){const a=N(Ie,`users/${e.uid}/playback`);le(a).then((e=>{if(e.exists()){const a=e.val();if(Me(a)){const e=JSON.parse(a,Re);t(e)}}}))}(e),async function(e){const t=N(Ie,`users/${e.uid}/controls`);le(t).then((e=>{if(e.exists()){const t=e.val();Je(t)&&p(t)}}))}(e)):(async function(){const e=localStorage.getItem("playback");if(null!==e&&Me(e)){const a=JSON.parse(e,Re);t(a)}}(),async function(){const e=localStorage.getItem("controls");if(null!==e&&Je(JSON.parse(e))){const t=JSON.parse(e);p(t)}}())}))}),[]),T.exports.useEffect((()=>{if(y()){const e=m();void 0!==e&&(e.currentTime=v())}}),[a]);const[f,E]=T.exports.useState(!1);function y(){return void 0!==a&&e.has(a.id)}function v(){if(y()){const t=e.get(a.id);if(void 0!==t)return t}return 0}const b=V(e,1e4);function x(n){if(void 0!==a)if(e instanceof Map&&void 0!==a){const s=new Map(e);s.set(a.id,n),t(s)}else{const e=new Map([[a.id,n]]);t(e)}}function h(e){return i.map((e=>e.id)).findIndex((t=>t===e))}return T.exports.useEffect((()=>{!function(e,t){if(null!==t){const a=N(Ie,`users/${t.uid}/playback`);C(a,JSON.stringify(e,Fe))}localStorage.setItem("playback",JSON.stringify(e,Fe))}(e,Se.currentUser)}),[b]),g.createElement("div",{className:l.container},g.createElement("div",{className:l.playback},g.createElement(U,{onClick:function(){const e=o(c({},u),{isShuffle:!u.isShuffle});p(e),Ue(e,Se.currentUser)}},g.createElement(ae,null)),g.createElement(U,{"aria-label":"play previous",onClick:()=>void 0!==a?function(e){const t=h(e),a=t>0?t-1:0;if(t!==a&&void 0!==i[a]){const e=i[a];n(e),ze(e,Se.currentUser)}}(a.id):null},g.createElement(ne,null)),g.createElement(U,{color:"secondary","aria-label":s?"pause":"play",onClick:()=>void 0!==a?r(!s):null},s?g.createElement($,{fontSize:"large"}):g.createElement(z,{fontSize:"large"})),g.createElement(U,{"aria-label":"play next",onClick:()=>void 0!==a?function(e){const t=h(e),a=t<i.length?t+1:i.length-1;if(t!==a&&void 0!==i[a]){const e=i[a];n(e),ze(e,Se.currentUser)}}(a.id):null},g.createElement(se,null)),g.createElement(U,{"aria-label":u.isRepeat?"repeat":"no repeat",onClick:function(){const e=o(c({},u),{isRepeat:!u.isRepeat});p(e),Ue(e,Se.currentUser)}},g.createElement(re,null))),g.createElement("div",{className:l.volume},g.createElement(U,{"aria-label":u.isMuted?"unmute":"mute",onClick:function(){const e=o(c({},u),{isMuted:!u.isMuted});p(e),Ue(e,Se.currentUser)},className:l.muteButton},u.isMuted?g.createElement(ie,null):g.createElement(ce,null)),g.createElement(oe,{value:u.volume,getAriaValueText:()=>`volume is ${100*u.volume}%`,"aria-labelledby":"volume-slider",onChange:(e,t)=>function(e){if("number"==typeof e){const t=o(c({},u),{volume:e});p(t),Ue(t,Se.currentUser)}}(t),min:0,step:.01,max:1})),g.createElement("div",{className:l.time},g.createElement(rt,{playerRef:d,controls:u,src:null==a?void 0:a.enclosureUrl,playing:s,onTickedCallback:function(e){f||x(e)}}),g.createElement(M,{variant:"subtitle2",color:"textSecondary"},Be(v())),g.createElement(oe,{color:"primary",className:l.playbackTimer,value:v(),getAriaValueText:()=>void 0!==a?`current time is ${v()} seconds`:"","aria-labelledby":"time-slider",onChange:(e,t)=>function(e){const t=m();void 0!==t&&"number"==typeof e&&(E(!0),t.currentTime=e,E(!1),x(e))}(t),min:0,step:1,max:void 0!==a?a.duration:0}),g.createElement(M,{variant:"subtitle2",color:"textSecondary"},Be(void 0!==a?a.duration:0))))}const ot=f((e=>({container:{backgroundColor:e.palette.primary.light,display:"grid",gridTemplateColumns:"minmax(208px, 256px) minmax(720px, 1fr)",gridTemplateRows:"minmax(24px, 48px) minmax(600px, 1fr) minmax(72px, 88px)",gridAutoFlow:"row",gridTemplateAreas:'"logo header header" "navigation content content" "art controls controls"',height:"100%"},logo:{gridArea:"logo",display:"flex"},header:{gridArea:"header",display:"flex",alignItems:"center",padding:"0px 24px"},navigation:{gridArea:"navigation"},content:{gridArea:"content",overflowY:"auto",overflowX:"hidden",padding:"0px 24px"},controls:{gridArea:"controls",padding:"0px 24px",backgroundColor:e.palette.primary.contrastText},art:{gridArea:"art",paddingLeft:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e.palette.primary.contrastText}})));function lt(){const e=ot(),t=E(),{client:a}=Ne(),[n,s]=T.exports.useState(!0),[r,i]=T.exports.useState([]),[c,o]=T.exports.useState(new Map),[l,d]=T.exports.useState(void 0),[m,u]=T.exports.useState(!1);var p;const f=(p=r.map((e=>({queryKey:["episodesByFeedId",e.id],queryFn:()=>async function(e){return(await a.episodesByFeedId(e,{max:10,fulltext:!0})).items}(e.id)}))),P(p)).flatMap((e=>e.isSuccess&&void 0!==e.data?e.data:[])).flat().sort((function(e,t){const a=e.datePublished,n=t.datePublished;return a===n?0:a<n?1:-1}));return T.exports.useEffect((()=>{Se.onAuthStateChanged((e=>{s(!0),null!==e?(console.log("User detected."),async function(e){try{const t=N(Ie,`users/${e.uid}/subscriptions`),a=await le(t);if(a.exists()){const e=a.val();Oe(e)&&i(e)}}catch(t){console.error(t)}}(e),async function(e){try{const t=N(Ie,`users/${e.uid}/activeEpisode`),a=await le(t);if(a.exists()){const e=a.val();je(e)&&d(e)}}catch(t){console.error(t)}}(e)):(async function(){const e=localStorage.getItem("subscriptions");if(null!==e&&Oe(JSON.parse(e))){const t=JSON.parse(e);i(t)}}(),async function(){const e=localStorage.getItem("activeEpisode");if(null!==e&&je(JSON.parse(e))){const t=JSON.parse(e);d(t)}}()),s(!1)}))}),[]),g.createElement("div",{className:e.container},g.createElement("header",{className:e.logo},g.createElement(st,null)),g.createElement("header",{className:e.header},g.createElement(at,null)),g.createElement("nav",{className:e.navigation},g.createElement(Ae,null)),g.createElement("main",{className:e.content},g.createElement(de,{location:t},g.createElement(me,{exact:!0,path:"/"},g.createElement(ue,null,g.createElement(qe,{episodes:f,playbackStates:c,activeEpisode:l,setActiveEpisode:d,isPlaying:m,setIsPlaying:u}))),g.createElement(me,{path:"/search/:term"},g.createElement(Ke,{subscriptions:r,setSubscriptions:i,playbackStates:c,activeEpisode:l,setActiveEpisode:d,isPlaying:m,setIsPlaying:u})),g.createElement(me,{path:"/search/:term"},g.createElement(Ke,{subscriptions:r,setSubscriptions:i,playbackStates:c,activeEpisode:l,setActiveEpisode:d,isPlaying:m,setIsPlaying:u})),g.createElement(me,{path:"/search"},g.createElement(Ke,{subscriptions:r,setSubscriptions:i,playbackStates:c,activeEpisode:l,setActiveEpisode:d,isPlaying:m,setIsPlaying:u})),g.createElement(me,{exact:!0,path:"/episode/:episodeId"},g.createElement(He,{episodeId:void 0,playbackStates:c,activeEpisode:l,setActiveEpisode:d,isPlaying:m,setIsPlaying:u})),g.createElement(me,{exact:!0,path:"/subscriptions"},g.createElement(Qe,{subscriptions:r,setSubscriptions:i,playbackStates:c,activeEpisode:l,setActiveEpisode:d,isPlaying:m,setIsPlaying:u})),g.createElement(me,{exact:!0,path:"/settings"},g.createElement(_e,null)),g.createElement(me,{exact:!0,path:"/podcast/:podcastId"},g.createElement(We,{podcastId:void 0,subscriptions:r,setSubscriptions:i,playbackStates:c,activeEpisode:l,setActiveEpisode:d,isPlaying:m,setIsPlaying:u})))),g.createElement("footer",{className:e.controls},void 0!==l?g.createElement(ct,{episodes:f,playbackStates:c,activeEpisode:l,isPlaying:m,setIsPlaying:u,setPlaybackStates:o,setActiveEpisode:d}):null),g.createElement("footer",{className:e.art},g.createElement(tt,{activeEpisode:l,subscriptions:r})))}const dt=pe({palette:{primary:{contrastText:ge[100],dark:ge[900],main:ge[700],light:ge[50]},secondary:{dark:fe[900],main:fe[800],light:fe[100]},info:{main:ge[100]}}}),mt=new Ee;ye.render(g.createElement(g.StrictMode,null,g.createElement(ve,{basename:"/podcaster"},g.createElement(be,{client:mt},g.createElement(Pe,null,g.createElement(xe,{theme:dt},g.createElement(lt,null)))))),document.getElementById("root"));
