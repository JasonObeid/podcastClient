var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,r=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&i(e,n,t[n]);if(a)for(var n of a(t))o.call(t,n)&&i(e,n,t[n]);return e},l=(e,a)=>t(e,n(a));import{i as c,G as d,g as p,a as u,P as m,R as g,m as f,u as E,L as h,b as v,c as y,d as b,e as x,f as S,h as I,j as k,k as P,l as w,r as C,s as N,n as A,C as L,o as T,p as B,q as M,T as R,M as O,t as F,I as U,v as $,w as j,x as J,y as z,z as V,A as D,B as G,D as H,E as W,F as Y,H as q,J as K,K as Q,N as X,O as Z,Q as _,S as ee,U as te,V as ne,W as ae,X as se,Y as oe,Z as ie,_ as re,$ as le,a0 as ce,a1 as de,a2 as pe,a3 as ue,a4 as me,a5 as ge,a6 as fe,a7 as Ee,a8 as he,a9 as ve,aa as ye,ab as be,ac as xe,ad as Se,ae as Ie,af as ke}from"./vendor.cd74f41f.js";const Pe={apiKey:"AIzaSyCFeT-GJW_TNkH3GRkEchgBSSxd8IxWq-8",authDomain:"podcaster-ca277.firebaseapp.com",databaseURL:"https://podcaster-ca277-default-rtdb.firebaseio.com/",projectId:"podcaster-ca277",storageBucket:"podcaster-ca277.appspot.com",messagingSenderId:"1060072167958",appId:"1:1060072167958:web:b8071b3de130430422f337",measurementId:"G-NHG3XF04JF"};if(void 0===Pe)throw new Error("Invalid firebase config.");c(Pe);const we={google:new d},Ce=p(),Ne=u(),Ae=new m("RBE7535YHVY2VFHJPUDJ","DZmpt7J^vKzbeNwd4EvQUtGQj7wwd6Eq#vwChUL4"),Le=g.createContext(void 0);function Te({children:e}){const t={client:Ae};return g.createElement(Le.Provider,{value:t},e)}function Be(){const e=g.useContext(Le);if(void 0===e)throw new Error("usePodcastIndex must be used within a PodcastIndexProvider");return e}const Me=f({blackText:{color:"black"}});function Re(){const e=Me(),t=E();return g.createElement(g.Fragment,null,g.createElement(h,{component:"nav","aria-label":"home search subscriptions settings"},g.createElement(v,{component:y,to:"/",selected:"/"===t.pathname,className:e.blackText},g.createElement(b,null,g.createElement(x,{color:"primary"})),g.createElement(S,{primary:"Home"})),g.createElement(v,{component:y,to:"/search",selected:t.pathname.includes("/search"),className:e.blackText},g.createElement(b,null,g.createElement(I,{color:"primary"})),g.createElement(S,{primary:"Search"})),g.createElement(v,{component:y,to:"/subscriptions",selected:"/subscriptions"===t.pathname,className:e.blackText},g.createElement(b,null,g.createElement(k,{color:"primary"})),g.createElement(S,{primary:"Subscriptions"})),g.createElement(v,{component:y,to:"/settings",selected:"/settings"===t.pathname,className:e.blackText},g.createElement(b,null,g.createElement(P,{color:"primary"})),g.createElement(S,{primary:"Settings"}))))}function Oe(e,t){return""!==t&&null!==t?t:e}function Fe(e){const t=new Date(0);t.setSeconds(e);const n=t.toISOString().substr(11,8);return"00"===n.substr(0,2)?n.substr(3):n}function Ue(e,t){return t instanceof Map?{dataType:"Map",value:[...t]}:t}function $e(e,t){return"object"==typeof t&&null!==t&&"Map"===t.dataType?new Map(t.value):t}function je(e){return void 0!==e}function Je(e){try{if(!function(e){return null!==e}(JSON.parse(e,$e)))return!1}catch(t){return!1}return!0}function ze(e){return void 0!==e.id}function Ve(e){return void 0!==e}function De(e,t){if(null!==t){const n=C(Ne,`users/${t.uid}/controls`);N(n,e)}localStorage.setItem("controls",JSON.stringify(e))}function Ge(e,t){if(null!==t){const n=C(Ne,`users/${t.uid}/subscriptions`);N(n,e)}localStorage.setItem("subscriptions",JSON.stringify(e))}function He(e,t){if(null!==t){const n=C(Ne,`users/${t.uid}/activeEpisode`);N(n,e)}localStorage.setItem("activeEpisode",JSON.stringify(e))}const We=f({endItems:{display:"flex",justifyContent:"flex-end",columnGap:"24px",alignItems:"center"},rounded:{borderRadius:"8px"},play:{display:"flex",alignItems:"center"},text:{display:"-webkit-box","-webkit-line-clamp":"4","-webkit-box-orient":"vertical",overflow:"hidden"},episodeLink:{paddingBottom:"8px"},header:{display:"flex",alignItems:"center",padding:16,paddingBottom:0}});function Ye(e,t,n){if(void 0!==e&&e instanceof Map&&e.has(t)){const a=e.get(t)||0;return Math.round(a/n*100)}return 0}function qe({episodeId:e,activeEpisode:t,setActiveEpisode:n,isPlaying:a,setIsPlaying:s,playbackStates:o}){const i=We(),r=E(),l=A(),{client:c}=Be(),[d,p]=L.exports.useState(null);const{data:u}=T(`episodeById/${d}`,(async function(){if(null!==d){return await c.episodeById(d)}})),m=null==u?void 0:u.episode;if(L.exports.useEffect((()=>{!async function(){if(void 0!==e)p(e);else if(void 0!==l.episodeId){const e=parseInt(l.episodeId);p(e)}}()}),[]),void 0!==m){const e=(f=m.description,document.createRange().createContextualFragment(f));return g.createElement(B,null,g.createElement("div",{className:i.header},g.createElement(M,{container:!0,spacing:1,alignItems:"center",justifyContent:"space-between",wrap:"nowrap"},g.createElement(M,{item:!0,xs:9},r.pathname.includes("episode")?g.createElement(R,{variant:"subtitle2"},m.title):g.createElement(O,{component:y,variant:"subtitle2",to:`/episode/${m.id}`},m.title)),g.createElement(M,{item:!0,xs:3,className:i.endItems},g.createElement(R,{variant:"body2",color:"textSecondary",component:"p"},`${Math.round(m.duration/60)} mins`),g.createElement(R,{variant:"body2",color:"textSecondary",component:"p"},new Date(1e3*m.datePublished).toLocaleDateString())))),g.createElement(F,null,g.createElement(M,{container:!0,spacing:1,alignItems:"center",justifyContent:"space-between",wrap:"nowrap"},g.createElement(M,{item:!0,xs:9},g.createElement(R,{variant:"body2",color:"textSecondary",component:"p",className:i.text},e.textContent||"")),g.createElement(M,{item:!0,xs:3,className:i.endItems},g.createElement(U,{publicId:Oe(m.image,m.feedImage),type:"fetch",className:i.rounded},g.createElement($,{width:"auto",height:48,crop:"fill",alt:m.title})),g.createElement(j,{onClick:async function(){void 0!==u&&(void 0!==m&&(n(m),He(m,Ce.currentUser)),s(!a))},color:"secondary"},a&&(null==t?void 0:t.id)===m.id?g.createElement(J,{fontSize:"large"}):g.createElement(z,{fontSize:"large"}))))),g.createElement(V,{variant:"determinate",value:Ye(o,m.id,m.duration)}))}var f;return null}function Ke({episodes:e,activeEpisode:t,setActiveEpisode:n,isPlaying:a,setIsPlaying:s,playbackStates:o}){return e.length>0?g.createElement(M,{container:!0,spacing:3,direction:"column",alignItems:"stretch"},e.map((e=>g.createElement(M,{item:!0,xs:!0,key:e.id,component:"article"},g.createElement(qe,{episodeId:e.id,playbackStates:o,setIsPlaying:s,isPlaying:a,activeEpisode:t,setActiveEpisode:n}))))):g.createElement(R,null,"Your feed is currently empty - try subscribing to a podcast!")}const Qe=D({container:{display:"grid",gridTemplateColumns:"minmax(600px, 3fr) minmax(88px, 96px)",gridTemplateRows:"1fr",gap:"0px 24px",gridAutoFlow:"row",gridTemplateAreas:'"content icon"',alignItems:"center"},podcast:{marginBottom:"48px"},content:{gridArea:"content"},icon:{gridArea:"icon",display:"flex",alignItems:"center",justifyContent:"center"},rounded:{borderRadius:"8px"},header:{display:"flex",alignItems:"center",padding:16,paddingBottom:0}});function Xe({podcastId:e,activeEpisode:t,setActiveEpisode:n,isPlaying:a,setIsPlaying:s,playbackStates:o,subscriptions:i,setSubscriptions:r}){const l=Qe(),{client:c}=Be(),d=A(),p=E(),[u,m]=L.exports.useState(void 0),[f,h]=L.exports.useState(void 0),v=T(`podcastById/${u}`,(async function(){if(void 0!==u){const e=await c.podcastById(u);return h(e.feed.id),e.feed}})),b=null==v?void 0:v.data,x=T(`episodesByFeedId/${f}`,(async function(){if(void 0!==f&&void 0!==b){return(await c.episodesByFeedId(f)).items}})),S=null==x?void 0:x.data;function I(){return void 0!==b&&i.map((e=>e.id)).includes(b.id)}return L.exports.useEffect((()=>{!async function(){void 0!==e&&m(e),void 0!==d.podcastId&&m(parseInt(d.podcastId))}()}),[]),g.createElement(L.exports.Fragment,null,void 0!==b?g.createElement(B,{className:p.pathname.includes("podcast")?l.podcast:""},g.createElement("div",{className:l.header},p.pathname.includes("podcast")?g.createElement(R,{variant:"h5",component:"h5"},b.title):g.createElement(O,{component:y,variant:"h5",to:`/podcast/${b.id}`},b.title)),g.createElement(F,{className:l.container},g.createElement(L.exports.Fragment,null,g.createElement("div",{className:l.content},g.createElement(R,{variant:"body2",color:"textSecondary",component:"p"},b.description)),g.createElement("div",{className:l.icon},g.createElement(U,{publicId:Oe(b.artwork,b.image),type:"fetch",className:l.rounded},g.createElement($,{width:"auto",height:80,crop:"fill",alt:b.title}))))),g.createElement(G,null,g.createElement(H,{size:"small",color:"primary",onClick:async function(){I()?async function(){if(void 0!==b){const e=i.filter((e=>e.id!==b.id));r(e),Ge(e,Ce.currentUser)}}():async function(){if(void 0!==b){const e=await c.podcastById(b.id),t=[...i,e.feed];r(t),Ge(t,Ce.currentUser)}}()}},I()?"Unsubscribe":"Subscribe"))):null,void 0!==S&&p.pathname.includes("podcast")?g.createElement(L.exports.Fragment,null,g.createElement(R,{variant:"h6",component:"h6"},"Episodes"),g.createElement(Ke,{episodes:S,playbackStates:o,activeEpisode:t,setActiveEpisode:n,isPlaying:a,setIsPlaying:s})):null)}const Ze=f({search:{paddingRight:"32px"}});function _e({subscriptions:e,setSubscriptions:t,activeEpisode:n,setActiveEpisode:a,isPlaying:s,setIsPlaying:o,playbackStates:i}){const r=Ze(),l=W(),c=A(),{client:d}=Be(),[p,u]=Y("",500),[m,f]=L.exports.useState("");L.exports.useEffect((()=>{if(void 0!==c.term&&""!==c.term&&c.term!==m){const e=c.term;f(e),u(e)}}),[]);const E=T(`search/${p}`,(async function(){if(""!==p){l.push(`/search/${p}`);return(await d.search(p)).feeds}})),h=null==E?void 0:E.data;return g.createElement(g.Fragment,null,g.createElement(q,{display:"flex",flexGrow:1,alignItems:"center",justifyContent:"space-between",marginBottom:"32px"},g.createElement(K,{id:"standard-search",label:"Search",type:"search",variant:"filled",fullWidth:!0,value:m,onChange:e=>{f(e.target.value),u(e.target.value)},className:r.search}),g.createElement(H,{variant:"contained",color:"primary",startIcon:g.createElement(I,null),onClick:()=>{u(m)}},"Search")),g.createElement(M,{container:!0,spacing:3,direction:"column",alignItems:"stretch",component:"article"},void 0!==h&&h.map((r=>g.createElement(M,{item:!0,key:r.id,component:"article"},g.createElement(Xe,{podcastId:r.id,subscriptions:e,setSubscriptions:t,playbackStates:i,activeEpisode:n,setActiveEpisode:a,isPlaying:s,setIsPlaying:o}))))))}function et({subscriptions:e,setSubscriptions:t,activeEpisode:n,setActiveEpisode:a,isPlaying:s,setIsPlaying:o,playbackStates:i}){return e.length>0?g.createElement(M,{container:!0,spacing:3,direction:"column",alignItems:"stretch",component:"article"},e.map((r=>g.createElement(M,{item:!0,key:r.id},g.createElement(Xe,{podcastId:r.id,subscriptions:e,setSubscriptions:t,playbackStates:i,activeEpisode:n,setActiveEpisode:a,isPlaying:s,setIsPlaying:o}))))):g.createElement(R,null,"No Active Subscriptions")}function tt({disabled:e}){return g.createElement("div",{style:{marginRight:8,background:e?"#fff":"#eee",padding:8,borderRadius:2,display:"flex",alignItems:"center"}},g.createElement("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},g.createElement("g",{fill:"#000",fillRule:"evenodd"},g.createElement("path",{d:"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z",fill:"#EA4335"}),g.createElement("path",{d:"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z",fill:"#4285F4"}),g.createElement("path",{d:"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z",fill:"#FBBC05"}),g.createElement("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z",fill:"#34A853"}),g.createElement("path",{fill:"none",d:"M0 0h18v18H0z"}))))}const nt=f((e=>({googleButton:{color:"#fff",padding:"8px",backgroundColor:"#3367D6",textTransform:"none","&:hover":{backgroundColor:"#1b53e2"}},defaultButton:{padding:"8px",textTransform:"none"},textStyle:{paddingRight:10,fontWeight:500,paddingLeft:0,paddingTop:10,paddingBottom:10}})));function at(){const e=nt(),t=W(),[n,a]=L.exports.useState(!1);return g.createElement(g.Fragment,null,g.createElement("h1",null,"Welcome to Podcaster"),null===Ce.currentUser?g.createElement("p",null,"Please sign in to sync your data to your account."):g.createElement("p",null,"Your data is being synced to your account."),g.createElement(M,{container:!0,direction:"column",spacing:2,alignItems:"stretch"},null===Ce.currentUser?g.createElement(g.Fragment,null,g.createElement(M,{item:!0},g.createElement(H,{variant:"contained",color:"secondary",disabled:n,onClick:()=>{return e=we.google,a(!0),Z(Ce,e).then((e=>{t.push("/")})).catch((e=>{const t=e.message;console.error(t)})),void a(!1);var e},className:e.googleButton,startIcon:g.createElement(tt,{disabled:n})},"Sign in with Google")),g.createElement(M,{item:!0},g.createElement(H,{variant:"contained",color:"secondary",disabled:n,onClick:()=>(a(!0),_(Ce).then((e=>{t.push("/")})).catch((e=>{const t=e.message;console.error(t)})),void a(!1)),className:e.defaultButton,startIcon:g.createElement("div",{style:{marginRight:8,padding:5,borderRadius:2,display:"flex",alignItems:"center"}},g.createElement(Q,null))},"Sign in anonymously"))):g.createElement(M,{item:!0},g.createElement(H,{variant:"contained",color:"primary",disabled:n,onClick:()=>{ee(Ce)},className:e.defaultButton,startIcon:g.createElement("div",{style:{marginRight:8,padding:5,borderRadius:2,display:"flex",alignItems:"center"}},g.createElement(X,null))},"Log out"))))}const st=f((e=>({rounded:{borderRadius:"8px"},emptyIcon:{backgroundColor:e.palette.primary.light,borderRadius:"8px"},title:{display:"-webkit-box","-webkit-line-clamp":"3","-webkit-box-orient":"vertical",overflow:"hidden",color:e.palette.primary.dark,textDecoration:"none"},author:{display:"-webkit-box","-webkit-line-clamp":"1","-webkit-box-orient":"vertical",overflow:"hidden",color:e.palette.primary.main,textDecoration:"none"}})));function ot({activeEpisode:e,subscriptions:t}){const n=st();return g.createElement(g.Fragment,null,void 0!==e?g.createElement(U,{publicId:Oe(e.image,e.feedImage),type:"fetch",className:n.rounded},g.createElement($,{width:"auto",height:56,crop:"fill",alt:e.title})):g.createElement("img",{height:"56px",width:"56px",className:n.emptyIcon}),g.createElement(q,{paddingLeft:"16px"},void 0!==e?g.createElement(g.Fragment,null,g.createElement(R,{gutterBottom:!0,variant:"subtitle2",component:te,to:`/episode/${e.id}`,className:n.title},e.title),g.createElement(R,{variant:"caption",color:"textSecondary",component:te,to:`/podcast/${e.feedId}`,className:n.author},void 0!==e?function(e,t){const n=e.find((e=>e.id===t));return n?n.author:""}(t,e.feedId):"")):null))}function it(){const e=W();return g.createElement(g.Fragment,null,g.createElement(j,{onClick:()=>e.goBack()},g.createElement(ne,null)),g.createElement(j,{onClick:()=>e.goForward()},g.createElement(ae,null)))}const rt=f((e=>({button:{display:"flex",justifyContent:"space-between",flexGrow:1},headerText:{paddingLeft:"8px"}})));function lt(){const e=rt();return g.createElement(H,{color:"primary",className:e.button,component:y,to:"/"},g.createElement(R,{variant:"h6",component:"h1",className:e.headerText},"podcaster"),g.createElement("img",{src:"/podcaster/assets/cat.bd0d0283.svg",height:"24px",width:"auto",alt:"cat"}))}class ct extends L.exports.Component{constructor(){super(...arguments),this.audioEl=g.createRef(),this.onError=e=>{var t,n;return null==(n=(t=this.props).onError)?void 0:n.call(t,e)},this.onCanPlay=e=>{var t,n;return null==(n=(t=this.props).onCanPlay)?void 0:n.call(t,e)},this.onCanPlayThrough=e=>{var t,n;return null==(n=(t=this.props).onCanPlayThrough)?void 0:n.call(t,e)},this.onPlay=e=>{var t,n;this.setListenTrack(),null==(n=(t=this.props).onPlay)||n.call(t,e)},this.onAbort=e=>{var t,n;this.clearListenTrack(),null==(n=(t=this.props).onAbort)||n.call(t,e)},this.onEnded=e=>{var t,n;this.clearListenTrack(),null==(n=(t=this.props).onEnded)||n.call(t,e)},this.onPause=e=>{var t,n;this.clearListenTrack(),null==(n=(t=this.props).onPause)||n.call(t,e)},this.onSeeked=e=>{var t,n;null==(n=(t=this.props).onSeeked)||n.call(t,e)},this.onLoadedMetadata=e=>{var t,n;null==(n=(t=this.props).onLoadedMetadata)||n.call(t,e)},this.onVolumeChanged=e=>{var t,n;null==(n=(t=this.props).onVolumeChanged)||n.call(t,e)}}componentDidMount(){const e=this.audioEl.current;e&&(this.updateVolume(this.props.volume),e.addEventListener("error",this.onError),e.addEventListener("canplay",this.onCanPlay),e.addEventListener("canplaythrough",this.onCanPlayThrough),e.addEventListener("play",this.onPlay),e.addEventListener("abort",this.onAbort),e.addEventListener("ended",this.onEnded),e.addEventListener("pause",this.onPause),e.addEventListener("seeked",this.onSeeked),e.addEventListener("loadedmetadata",this.onLoadedMetadata),e.addEventListener("volumechange",this.onVolumeChanged))}componentWillUnmount(){const e=this.audioEl.current;e&&(e.removeEventListener("error",this.onError),e.removeEventListener("canplay",this.onCanPlay),e.removeEventListener("canplaythrough",this.onCanPlayThrough),e.removeEventListener("play",this.onPlay),e.removeEventListener("abort",this.onAbort),e.removeEventListener("ended",this.onEnded),e.removeEventListener("pause",this.onPause),e.removeEventListener("seeked",this.onSeeked),e.removeEventListener("loadedmetadata",this.onLoadedMetadata),e.removeEventListener("volumechange",this.onVolumeChanged))}componentDidUpdate(e){this.updateVolume(this.props.volume)}setListenTrack(){if(!this.listenTracker){const e=this.props.listenInterval;this.listenTracker=window.setInterval((()=>{var e,t;this.audioEl.current&&(null==(t=(e=this.props).onListen)||t.call(e,this.audioEl.current.currentTime))}),e)}}updateVolume(e){const t=this.audioEl.current;null!==t&&"number"==typeof e&&e!==(null==t?void 0:t.volume)&&(t.volume=e)}clearListenTrack(){this.listenTracker&&(clearInterval(this.listenTracker),delete this.listenTracker)}render(){const e=this.props.children||g.createElement("p",null,"Your browser does not support the ",g.createElement("code",null,"audio")," element."),t=!(!1===this.props.controls),n=this.props.title?this.props.title:this.props.src,a={};return this.props.controlsList&&(a.controlsList=this.props.controlsList),g.createElement("audio",r({autoPlay:this.props.autoPlay,className:`react-audio-player ${this.props.className}`,controls:t,crossOrigin:this.props.crossOrigin,id:this.props.id,loop:this.props.loop,muted:this.props.muted,preload:this.props.preload,ref:this.audioEl,src:this.props.src,style:this.props.style,title:n},a),e)}}ct.defaultProps={autoPlay:!1,children:null,className:"",controls:!1,controlsList:"",id:"",listenInterval:1e4,loop:!1,muted:!1,onAbort:()=>{},onCanPlay:()=>{},onCanPlayThrough:()=>{},onEnded:()=>{},onError:()=>{},onListen:()=>{},onPause:()=>{},onPlay:()=>{},onSeeked:()=>{},onVolumeChanged:()=>{},onLoadedMetadata:()=>{},preload:"metadata",style:{},title:"",volume:1},ct.propTypes={autoPlay:se.bool,children:se.element,className:se.string,controls:se.bool,controlsList:se.string,crossOrigin:se.string,id:se.string,listenInterval:se.number,loop:se.bool,muted:se.bool,onAbort:se.func,onCanPlay:se.func,onCanPlayThrough:se.func,onEnded:se.func,onError:se.func,onListen:se.func,onLoadedMetadata:se.func,onPause:se.func,onPlay:se.func,onSeeked:se.func,onVolumeChanged:se.func,preload:se.oneOf(["","none","metadata","auto"]),src:se.string,style:se.objectOf(se.string),title:se.string,volume:se.number};function dt({playerRef:e,controls:t,src:n,onTickedCallback:a}){return g.createElement(ct,{ref:e,autoPlay:!1,muted:t.isMuted,volume:t.volume,src:n,loop:t.isRepeat,listenInterval:1e3,onListen:a})}const pt=f((e=>({container:{display:"grid",gridTemplateColumns:"minmax(0, 9fr) minmax(0, 2fr)",gridTemplateRows:"minmax(0, 2fr) minmax(0, 1fr)",gap:"0px 8px",gridAutoFlow:"row",gridTemplateAreas:'"playback volume" "time volume"',height:"100%"},playback:{gridArea:"playback",display:"flex",justifyContent:"center",alignItems:"center",margin:"0px 80px"},volume:{gridArea:"volume",display:"flex",justifyContent:"center",alignItems:"center"},time:{gridArea:"time",alignItems:"center",margin:"0px 80px",display:"flex"},playbackTimer:{marginInline:"24px"},muteButton:{marginRight:"16px"},muteButtonActive:{marginRight:"16px",backgroundColor:e.palette.primary.light},shuffleButtonActive:{backgroundColor:e.palette.primary.light},repeatButtonActive:{backgroundColor:e.palette.primary.light}})));function ut({playbackStates:e,setPlaybackStates:t,activeEpisode:n,setActiveEpisode:a,isPlaying:s,setIsPlaying:o,episodes:i}){const c=pt(),d=L.exports.useRef(null);function p(){var e;if(null!==d&&null!==d.current){const t=null==(e=d.current)?void 0:e.audioEl.current;if(null!==t)return t}}L.exports.useEffect((()=>{const e=p();void 0!==e&&(s?e.play():e.pause())}),[s]);const[u,m]=L.exports.useState({isMuted:!1,isShuffle:!1,isRepeat:!1,volume:.15});L.exports.useEffect((()=>{Ce.onAuthStateChanged((e=>{null!==e?(async function(e){const n=C(Ne,`users/${e.uid}/playback`);ue(n).then((e=>{if(e.exists()){const n=e.val();if(Je(n)){const e=JSON.parse(n,$e);t(e)}}}))}(e),async function(e){const t=C(Ne,`users/${e.uid}/controls`);ue(t).then((e=>{if(e.exists()){const t=e.val();Ve(t)&&m(t)}}))}(e)):(async function(){const e=localStorage.getItem("playback");if(null!==e&&Je(e)){const n=JSON.parse(e,$e);t(n)}}(),async function(){const e=localStorage.getItem("controls");if(null!==e&&Ve(JSON.parse(e))){const t=JSON.parse(e);m(t)}}())}))}),[]),L.exports.useEffect((()=>{if(h()){const e=p();void 0!==e&&(e.currentTime=v())}}),[n]);const[f,E]=L.exports.useState(!1);function h(){return void 0!==n&&e.has(n.id)}function v(){if(h()&&void 0!==n){const t=e.get(n.id);if(void 0!==t)return t}return 0}const y=Y(e,1e4);function b(a){if(void 0!==n)if(e instanceof Map&&void 0!==n){const s=new Map(e);s.set(n.id,a),t(s)}else{const e=new Map([[n.id,a]]);t(e)}}function x(e){return i.map((e=>e.id)).findIndex((t=>t===e))}return L.exports.useEffect((()=>{!function(e,t){if(e.size>0){if(null!==t){const n=C(Ne,`users/${t.uid}/playback`);N(n,JSON.stringify(e,Ue))}localStorage.setItem("playback",JSON.stringify(e,Ue))}}(e,Ce.currentUser)}),[y]),g.createElement("div",{className:c.container},g.createElement("div",{className:c.playback},g.createElement(j,{onClick:function(){const e=l(r({},u),{isShuffle:!u.isShuffle});m(e),De(e,Ce.currentUser)},"aria-label":u.isShuffle?"pause":"play",className:u.isShuffle?c.shuffleButtonActive:void 0},g.createElement(oe,null)),g.createElement(j,{"aria-label":"play previous",onClick:()=>void 0!==n?function(e){const t=x(e),n=t>0?t-1:0;if(t!==n&&void 0!==i[n]){const e=i[n];a(e),He(e,Ce.currentUser)}}(n.id):null},g.createElement(ie,null)),g.createElement(j,{color:"secondary","aria-label":s?"pause":"play",onClick:()=>void 0!==n?o(!s):null},s?g.createElement(J,{fontSize:"large"}):g.createElement(z,{fontSize:"large"})),g.createElement(j,{"aria-label":"play next",onClick:()=>void 0!==n?function(e){const t=x(e),n=t<i.length?t+1:i.length-1;if(t!==n&&void 0!==i[n]){const e=i[n];a(e),He(e,Ce.currentUser)}}(n.id):null},g.createElement(re,null)),g.createElement(j,{"aria-label":u.isRepeat?"repeat":"no repeat",onClick:function(){const e=l(r({},u),{isRepeat:!u.isRepeat});m(e),De(e,Ce.currentUser)},className:u.isRepeat?c.repeatButtonActive:void 0},g.createElement(le,null))),g.createElement("div",{className:c.volume},g.createElement(j,{"aria-label":u.isMuted?"unmute":"mute",onClick:function(){const e=l(r({},u),{isMuted:!u.isMuted});m(e),De(e,Ce.currentUser)},className:u.isMuted?c.muteButtonActive:c.muteButton},u.isMuted?g.createElement(ce,null):g.createElement(de,null)),g.createElement(pe,{value:u.volume,getAriaValueText:()=>`volume is ${100*u.volume}%`,"aria-labelledby":"volume-slider",onChange:(e,t)=>function(e){if("number"==typeof e){const t=l(r({},u),{volume:e});m(t),De(t,Ce.currentUser)}}(t),min:0,step:.01,max:1})),g.createElement("div",{className:c.time},g.createElement(dt,{playerRef:d,controls:u,src:null==n?void 0:n.enclosureUrl,playing:s,onTickedCallback:function(e){f||b(e)}}),g.createElement(R,{variant:"subtitle2",color:"textSecondary"},Fe(v())),g.createElement(pe,{color:"primary",className:c.playbackTimer,value:v(),getAriaValueText:()=>void 0!==n?`current time is ${v()} seconds`:"","aria-labelledby":"time-slider",onChange:(e,t)=>function(e){const t=p();void 0!==t&&"number"==typeof e&&(E(!0),t.currentTime=e,E(!1),b(e))}(t),min:0,step:1,max:void 0!==n?n.duration:0}),g.createElement(R,{variant:"subtitle2",color:"textSecondary"},Fe(void 0!==n?n.duration:0))))}const mt=f((e=>({container:{backgroundColor:e.palette.primary.light,display:"grid",gridTemplateColumns:"minmax(208px, 256px) minmax(720px, 1fr)",gridTemplateRows:"minmax(24px, 48px) minmax(600px, 1fr) minmax(72px, 88px)",gridAutoFlow:"row",gridTemplateAreas:'"logo header header" "navigation content content" "art controls controls"',height:"100%"},logo:{gridArea:"logo",display:"flex"},header:{gridArea:"header",display:"flex",alignItems:"center",padding:"0px 24px"},navigation:{gridArea:"navigation",marginBottom:"8px"},content:{gridArea:"content",overflowY:"auto",overflowX:"hidden",padding:"0px 24px",marginTop:"8px",marginBottom:"8px"},controls:{gridArea:"controls",padding:"0px 24px",backgroundColor:e.palette.info.main},art:{gridArea:"art",paddingLeft:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:e.palette.info.main}})));function gt(){const e=mt(),t=E(),{client:n}=Be(),[a,s]=L.exports.useState([]),[o,i]=L.exports.useState(new Map),[r,l]=L.exports.useState(void 0),[c,d]=L.exports.useState(!1);var p;const u=(p=a.map((e=>({queryKey:["episodesByFeedId",e.id],queryFn:()=>async function(e){return(await n.episodesByFeedId(e,{max:10,fulltext:!0})).items}(e.id)}))),w(p)).flatMap((e=>e.isSuccess&&void 0!==e.data?e.data:[])).flat().sort((function(e,t){const n=e.datePublished,a=t.datePublished;return n===a?0:n<a?1:-1}));return L.exports.useEffect((()=>{Ce.onAuthStateChanged((e=>{null!==e?(console.log("User detected."),async function(e){try{const t=C(Ne,`users/${e.uid}/subscriptions`),n=await ue(t);if(n.exists()){const e=n.val();je(e)&&s(e)}}catch(t){console.error(t)}}(e),async function(e){try{const t=C(Ne,`users/${e.uid}/activeEpisode`),n=await ue(t);if(n.exists()){const e=n.val();ze(e)&&l(e)}}catch(t){console.error(t)}}(e)):(async function(){const e=localStorage.getItem("subscriptions");if(null!==e&&je(JSON.parse(e))){const t=JSON.parse(e);s(t)}}(),async function(){const e=localStorage.getItem("activeEpisode");if(null!==e&&ze(JSON.parse(e))){const t=JSON.parse(e);l(t)}}())}))}),[]),g.createElement("div",{className:e.container},g.createElement("header",{className:e.logo},g.createElement(lt,null)),g.createElement("header",{className:e.header},g.createElement(it,null)),g.createElement("nav",{className:e.navigation},g.createElement(Re,null)),g.createElement("main",{className:e.content},g.createElement(me,{location:t},g.createElement(ge,{exact:!0,path:"/"},g.createElement(fe,null,g.createElement(Ke,{episodes:u,playbackStates:o,activeEpisode:r,setActiveEpisode:l,isPlaying:c,setIsPlaying:d}))),g.createElement(ge,{path:"/search/:term"},g.createElement(_e,{subscriptions:a,setSubscriptions:s,playbackStates:o,activeEpisode:r,setActiveEpisode:l,isPlaying:c,setIsPlaying:d})),g.createElement(ge,{path:"/search/:term"},g.createElement(_e,{subscriptions:a,setSubscriptions:s,playbackStates:o,activeEpisode:r,setActiveEpisode:l,isPlaying:c,setIsPlaying:d})),g.createElement(ge,{path:"/search"},g.createElement(_e,{subscriptions:a,setSubscriptions:s,playbackStates:o,activeEpisode:r,setActiveEpisode:l,isPlaying:c,setIsPlaying:d})),g.createElement(ge,{exact:!0,path:"/episode/:episodeId"},g.createElement(qe,{episodeId:void 0,playbackStates:o,activeEpisode:r,setActiveEpisode:l,isPlaying:c,setIsPlaying:d})),g.createElement(ge,{exact:!0,path:"/subscriptions"},g.createElement(et,{subscriptions:a,setSubscriptions:s,playbackStates:o,activeEpisode:r,setActiveEpisode:l,isPlaying:c,setIsPlaying:d})),g.createElement(ge,{exact:!0,path:"/settings"},g.createElement(at,null)),g.createElement(ge,{exact:!0,path:"/podcast/:podcastId"},g.createElement(Xe,{podcastId:void 0,subscriptions:a,setSubscriptions:s,playbackStates:o,activeEpisode:r,setActiveEpisode:l,isPlaying:c,setIsPlaying:d})))),g.createElement("footer",{className:e.controls},g.createElement(ut,{episodes:u,playbackStates:o,activeEpisode:r,isPlaying:c,setIsPlaying:d,setPlaybackStates:i,setActiveEpisode:l})),g.createElement("footer",{className:e.art},g.createElement(ot,{activeEpisode:r,subscriptions:a})))}const ft=Ee({palette:{primary:{contrastText:he[50],dark:he[900],main:he[700],light:he[50]},secondary:{dark:ve[900],main:ve[800],light:ve[100]},info:{main:he[100]}}}),Et=new ye;be.render(g.createElement(g.StrictMode,null,g.createElement(xe,{basename:"/podcaster"},g.createElement(Se,{client:Et},g.createElement(Ie,{cloudName:"dqg6dtafg",style:{height:"100%"}},g.createElement(Te,null,g.createElement(ke,{theme:ft},g.createElement(gt,null))))))),document.getElementById("root"));
