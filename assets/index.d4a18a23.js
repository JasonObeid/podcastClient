import{i as e,G as t,g as a,a as n,P as s,R as o,m as i,u as c,L as r,b as l,c as d,d as m,e as p,f as u,h as g,j as E,k as v,C as y,I as x,l as f,n as b,o as h,p as S,q as I,r as w,s as k,t as P,S as A,v as N,w as C,x as F,y as B,z as T,A as R,B as $,T as U,M as j,D as G,E as M,F as L,H as z,J as D,K as H,N as J,O as q,Q as V,U as K,V as O,W,X as Y,Y as Q,Z as X,_ as Z,$ as _,a0 as ee,a1 as te,a2 as ae,a3 as ne,a4 as se,a5 as oe,a6 as ie}from"./vendor.a25c372a.js";e({apiKey:"AIzaSyCFeT-GJW_TNkH3GRkEchgBSSxd8IxWq-8",authDomain:"podcaster-ca277.firebaseapp.com",databaseURL:"https://podcaster-ca277-default-rtdb.firebaseio.com/",projectId:"podcaster-ca277",storageBucket:"podcaster-ca277.appspot.com",messagingSenderId:"1060072167958",appId:"1:1060072167958:web:b8071b3de130430422f337",measurementId:"G-NHG3XF04JF"});const ce={google:new t},re=a(),le=n(),de=new s("RBE7535YHVY2VFHJPUDJ","DZmpt7J^vKzbeNwd4EvQUtGQj7wwd6Eq#vwChUL4"),me=o.createContext(void 0);function pe({children:e}){const t={client:de};return o.createElement(me.Provider,{value:t},e)}function ue(){const e=o.useContext(me);if(void 0===e)throw new Error("usePodcastIndex must be used within a PodcastIndexProvider");return e}const ge=i({blackText:{color:"black"}});var Ee=o.memo((function(){const e=ge(),t=c();return o.createElement(o.Fragment,null,o.createElement(r,{component:"nav","aria-label":"search feed subscriptions settings"},o.createElement(l,{component:d,to:"/search",selected:t.pathname.includes("/search"),className:e.blackText},o.createElement(m,null,o.createElement(p,{color:"primary"})),o.createElement(u,{primary:"Search"})),o.createElement(l,{component:d,to:"/feed",selected:"/feed"===t.pathname,className:e.blackText},o.createElement(m,null,o.createElement(g,{color:"primary"})),o.createElement(u,{primary:"Feed"})),o.createElement(l,{component:d,to:"/subscriptions",selected:"/subscriptions"===t.pathname,className:e.blackText},o.createElement(m,null,o.createElement(E,{color:"primary"})),o.createElement(u,{primary:"Subscriptions"})),o.createElement(l,{component:d,to:"/settings",selected:"/settings"===t.pathname,className:e.blackText},o.createElement(m,null,o.createElement(v,{color:"primary"})),o.createElement(u,{primary:"Settings"}))))}));const ve=i((e=>({container:{display:"grid",gridTemplateColumns:"minmax(0, 9fr) minmax(0, 2fr)",gridTemplateRows:"minmax(0, 2fr) minmax(0, 1fr)",gap:"0px 8px",gridAutoFlow:"row",gridTemplateAreas:'"playback volume" "time volume"',height:"100%"},playback:{gridArea:"playback",display:"flex",justifyContent:"center",alignItems:"center",margin:"0px 80px"},volume:{gridArea:"volume",display:"flex",justifyContent:"center",alignItems:"center"},time:{gridArea:"time",alignItems:"center",margin:"0px 80px"},muteButton:{marginRight:"16px"}})));function ye({playbackStates:e,setPlaybackStates:t,activeEpisode:a,setActiveEpisode:n,subscriptions:s,isPlaying:i,setIsPlaying:c,episodes:r}){const l=ve(),d=y.exports.useRef(null);y.exports.useRef(e).current=e;y.exports.useRef(a).current=a;const[m,p]=y.exports.useState(!1),[u,g]=y.exports.useState(0),[E,v]=y.exports.useState(!1);function C(n){if(void 0!==a)if(e instanceof Map&&void 0!==a){const s=new Map(e);s.set(a.id,n),console.log(s),t(s)}else{const e=new Map([[a.id,n]]);t(e),console.log(e)}}const F=e=>{p(!m)};function B(e){const t=r.map((e=>e.id)).findIndex((t=>t===e));return console.log(t),t}const T=e=>{const t=B(e),a=t>0?t-1:0;console.log(a),t!==a&&(console.log(r[a]),n(r[a]))};return o.createElement("div",{className:l.container},o.createElement("div",{className:l.playback},o.createElement(x,{onClick:F},o.createElement(f,null)),o.createElement(x,{"aria-label":"play previous",onClick:()=>void 0!==a?(e=>{const t=B(e),a=t<r.length?t+1:r.length-1;console.log(a),t!==a&&(console.log(r[a]),n(r[a]))})(a.id):null},o.createElement(b,null)),o.createElement(x,{"aria-label":i?"pause":"play",onClick:()=>void 0!==a?c(!i):null},i?o.createElement(h,{fontSize:"large"}):o.createElement(S,{fontSize:"large"})),o.createElement(x,{"aria-label":"play next",onClick:()=>void 0!==a?T(a.id):null},o.createElement(I,null)),o.createElement(x,{"aria-label":m?"repeat":"no repeat",onClick:T},o.createElement(w,null))),o.createElement("div",{className:l.volume},o.createElement(x,{"aria-label":m?"unmute":"mute",onClick:F,className:l.muteButton},m?o.createElement(k,null):o.createElement(P,null)),o.createElement(A,{value:u,getAriaValueText:()=>`volume is ${100*u}%`,"aria-labelledby":"volume-slider",onChange:(e,t)=>{"number"==typeof t&&g(t)},min:0,step:.01,max:1})),o.createElement("div",{className:l.time},o.createElement(N,{ref:d,url:void 0!==a?a.enclosureUrl:void 0,playing:i,volume:u,muted:m,onProgress:e=>{!E&&e.playedSeconds>0&&C(e.playedSeconds)},width:0,height:0}),o.createElement(A,{value:null!==a&&e instanceof Map&&void 0!==(null==a?void 0:a.id)&&e.has(null==a?void 0:a.id)?e.get(null==a?void 0:a.id):0,getAriaValueText:()=>void 0!==a?`current time is ${e.get(a.id)} seconds`:"","aria-labelledby":"time-slider",onChange:(e,t)=>{null!==d&&null!==d.current&&"number"==typeof t&&(console.log(t),v(!0),d.current.seekTo(t,"seconds"),v(!1),C(t))},min:0,step:1,max:void 0!==a?a.duration:0})))}function xe(e,t){return""!==t&&null!==t?t:e}const fe=i({endItems:{display:"flex",justifyContent:"flex-end",columnGap:"24px"},rounded:{borderRadius:"0.7rem"},play:{display:"flex",flexDirection:"column",rowGap:"8px",alignItems:"center"},text:{display:"-webkit-box","-webkit-line-clamp":"4","-webkit-box-orient":"vertical",overflow:"hidden"}});function be(e,t,a){if(void 0!==e&&e instanceof Map&&e.has(t)){const n=e.get(t)||0;return Math.round(n/a*100)}return 0}const he=({html:e})=>{const t=y.exports.useRef(null);return y.exports.useEffect((()=>{const{current:a}=t,n=document.createRange().createContextualFragment(e);return a.appendChild(n),()=>{a.textContent=""}}),[e]),o.createElement("div",{ref:t})};function Se({episodeId:e,activeEpisode:t,setActiveEpisode:a,isPlaying:n,setIsPlaying:s,playbackStates:i}){const r=fe(),l=c(),m=F(),{client:p}=ue(),[u,g]=y.exports.useState(null);const{isLoading:E,isError:v,data:f,error:b}=B(`episodeById/${u}`,(async function(){if(null!==u){return await p.episodeById(u)}})),I=null==f?void 0:f.episode;return y.exports.useEffect((()=>{!async function(){console.log(m),void 0!==e&&g(e),m.hasOwnProperty("episodeId")&&g(m.episodeId)}()}),[]),void 0!==I?o.createElement(T,{component:"article"},o.createElement(R,null,o.createElement($,{container:!0,spacing:1,alignItems:"center",justifyContent:"space-between",wrap:"nowrap"},o.createElement($,{item:!0,xs:9},l.pathname.includes("episode")?o.createElement(y.exports.Fragment,null,o.createElement(U,{gutterBottom:!0,variant:"subtitle2"},I.title),(w=I.description,o.createElement(he,{html:w}))):o.createElement(y.exports.Fragment,null,o.createElement(j,{component:d,gutterBottom:!0,variant:"subtitle2",to:`/episode/${I.id}`},I.title),o.createElement(U,{variant:"body2",color:"textSecondary",component:"p",className:r.text},function(e){return document.createRange().createContextualFragment(e).textContent||""}(I.description)))),o.createElement($,{item:!0,xs:3,className:r.endItems},o.createElement(y.exports.Fragment,null,o.createElement(G,null,o.createElement(U,{variant:"body2",color:"textSecondary",component:"p"},new Date(1e3*I.datePublished).toLocaleDateString()),o.createElement("img",{src:xe(I.image,I.feedImage),height:"48px",width:"auto",className:r.rounded})),o.createElement(G,{className:r.play},o.createElement(U,{variant:"body2",color:"textSecondary",component:"p"},`${Math.round(I.duration/60)} mins`),o.createElement(x,{onClick:async function(){void 0!==f&&(a(I),s(!n))}},n&&(null==t?void 0:t.id)===I.id?o.createElement(h,{fontSize:"large"}):o.createElement(S,{fontSize:"large"}))))))),o.createElement(M,{variant:"determinate",value:be(i,I.id,I.duration)})):null;var w}var Ie=o.memo((function({episodes:e,activeEpisode:t,setActiveEpisode:a,isPlaying:n,setIsPlaying:s,playbackStates:i}){return ue(),o.createElement($,{container:!0,spacing:3,direction:"column",alignItems:"stretch"},e.map((e=>o.createElement($,{item:!0,xs:!0,key:e.id},o.createElement(Se,{episodeId:e.id,playbackStates:i,setIsPlaying:s,isPlaying:n,activeEpisode:t,setActiveEpisode:a})))))}));const we=L({container:{display:"grid",gridTemplateColumns:"minmax(600px, 3fr) minmax(88px, 96px)",gridTemplateRows:"1fr",gap:"0px 16px",gridAutoFlow:"row",gridTemplateAreas:'"content icon"',alignItems:"center"},podcast:{marginBottom:"48px"},content:{gridArea:"content"},icon:{gridArea:"icon",textAlign:"center"}});var ke=o.memo((function({podcastId:e,activeEpisode:t,setActiveEpisode:a,isPlaying:n,setIsPlaying:s,playbackStates:i,subscriptions:r,setSubscriptions:l}){const m=we(),{client:p}=ue(),u=F(),g=c(),[E,v]=y.exports.useState(void 0),[x,f]=y.exports.useState(void 0),b=B(`podcastById/${E}`,(async function(){if(void 0!==E){const e=await p.podcastById(E);return f(e.feed.id),e.feed}})),h=null==b?void 0:b.data,S=B(`episodesByFeedId/${x}`,(async function(){if(void 0!==x&&void 0!==h){return(await p.episodesByFeedId(x)).items}})),I=null==S?void 0:S.data;function w(){return void 0!==h&&r.map((e=>e.id)).includes(h.id)}return y.exports.useEffect((()=>{!async function(){void 0!==e&&v(e),u.hasOwnProperty("podcastId")&&(console.log(u),v(u.podcastId))}()}),[]),o.createElement(y.exports.Fragment,null,void 0!==h?o.createElement(T,{component:"article",className:g.pathname.includes("podcast")?m.podcast:""},o.createElement(R,{className:m.container},o.createElement(y.exports.Fragment,null,o.createElement("div",{className:m.content},g.pathname.includes("podcast")?o.createElement(U,{variant:"h5",component:"h5",gutterBottom:!0},h.title):o.createElement(j,{component:d,gutterBottom:!0,variant:"h5",to:`/podcast/${h.id}`},h.title),o.createElement(U,{variant:"body2",color:"textSecondary",component:"p"},h.description)),o.createElement("div",{className:m.icon},o.createElement("img",{src:xe(h.artwork,h.image),height:"80px",width:"auto"})))),o.createElement(z,null,o.createElement(D,{size:"small",color:"primary",onClick:async function(){w()?async function(){if(void 0!==h){const e=r.filter((e=>e.id!==h.id));console.log(e),l(e);const t=re.currentUser;null!==t&&H(J(le,`users/${t.uid}/subscriptions`),e)}}():async function(){if(void 0!==h){const e=await p.podcastById(h.id),t=[...r,e.feed];console.log(t),l(t);const a=re.currentUser;null!==a&&H(J(le,`users/${a.uid}/subscriptions`),t)}}()}},w()?"Unsubscribe":"Subscribe"))):null,void 0!==I&&g.pathname.includes("podcast")?o.createElement(y.exports.Fragment,null,o.createElement(U,{variant:"h6",component:"h6"},"Episodes"),o.createElement(Ie,{episodes:I,playbackStates:i,activeEpisode:t,setActiveEpisode:a,isPlaying:n,setIsPlaying:s})):null)}));const Pe=i({search:{width:"75%"}});var Ae=o.memo((function({subscriptions:e,setSubscriptions:t,activeEpisode:a,setActiveEpisode:n,isPlaying:s,setIsPlaying:i,playbackStates:c}){const r=Pe(),l=q(),d=F(),{client:m}=ue(),[u,g]=y.exports.useState("");y.exports.useEffect((()=>{if(console.log(d),d.hasOwnProperty("term")&&""!==d.term&&d.term!==u){const e=d.term;g(e)}}),[]);const E=B(`search/${u}`,(async function(){if(""!==u){l.push(`/search/${u}`);return(await m.search(u)).feeds}})),v=null==E?void 0:E.data;return o.createElement(o.Fragment,null,o.createElement(G,{display:"flex",flexGrow:1,alignItems:"center",justifyContent:"space-between",marginBottom:"32px"},o.createElement(V,{id:"standard-search",label:"Search",type:"search",value:u,onChange:e=>{g(e.target.value)},className:r.search}),o.createElement(D,{variant:"contained",color:"primary",startIcon:o.createElement(p,null),onClick:()=>async function(){}()},"Search")),o.createElement($,{container:!0,spacing:3,direction:"column",alignItems:"stretch"},void 0!==v&&v.map((r=>o.createElement($,{item:!0,key:r.id,component:"article"},o.createElement(ke,{podcastId:r.id,subscriptions:e,setSubscriptions:t,playbackStates:c,activeEpisode:a,setActiveEpisode:n,isPlaying:s,setIsPlaying:i}))))))}));var Ne=o.memo((function({subscriptions:e,setSubscriptions:t,activeEpisode:a,setActiveEpisode:n,isPlaying:s,setIsPlaying:i,playbackStates:c}){return o.createElement($,{container:!0,spacing:3,direction:"column",alignItems:"stretch"},e.map((r=>o.createElement($,{item:!0,key:r.id},o.createElement(ke,{podcastId:r.id,subscriptions:e,setSubscriptions:t,playbackStates:c,activeEpisode:a,setActiveEpisode:n,isPlaying:s,setIsPlaying:i})))))}));function Ce(){const[e,t]=y.exports.useState(!1),[a,n]=y.exports.useState("");q();return o.createElement("div",{className:"AuthLogin"},o.createElement("div",{className:"auth-main-container"},o.createElement("div",null,o.createElement("h1",null,"Welcome to React App"),o.createElement("p",null,"Please Signup to continue by choosing one of the options below.")),o.createElement("div",{className:"auth-btn-wrapper"},o.createElement("button",{disabled:e,onClick:()=>{return e=ce.google,""!==a&&n(""),t(!0),void K(re,e).then((t=>{console.log(t),e.credentialFromResult(t).accessToken;const a=t.user;console.log(a)})).catch((t=>{console.log(t),t.code,t.message,t.email,e.credentialFromError(t)}));var e}},"SignUp with Google"),o.createElement(d,{to:"/"},o.createElement("button",null,"Back To Home Page")))))}const Fe=i((e=>({container:{display:"grid",gridTemplateColumns:"minmax(208px, 256px) minmax(720px, 1fr)",gridTemplateRows:"minmax(24px, 48px) minmax(600px, 1fr) minmax(88px, 120px)",gap:"16px 16px",gridAutoFlow:"row",gridTemplateAreas:'"logo header header" "navigation content content" "art controls controls"',height:"100%"},logo:{gridArea:"logo",display:"flex"},header:{gridArea:"header",display:"flex",alignItems:"center",padding:"0px 16px"},navigation:{gridArea:"navigation"},content:{gridArea:"content",overflowY:"auto",overflowX:"hidden",padding:"0px 16px"},controls:{gridArea:"controls",padding:"0px 16px"},art:{gridArea:"art",paddingLeft:"16px",display:"flex",justifyContent:"space-between",alignItems:"center"},rounded:{borderRadius:"0.7rem"},buttonPadding:{display:"flex",justifyContent:"space-between",flexGrow:1},headerText:{paddingLeft:"8px"}})));function Be(e){return console.log(e.entries),!0}function Te(){const[e,t]=y.exports.useState(!0);y.exports.useEffect((()=>{t(!0),null!==re.currentUser?(console.log("User detected."),O(W(J(le),`users/${re.currentUser.uid}/subscriptions`)).then((e=>{if(e.exists()){console.log(e.val());const t=e.val();c(t)}else console.log("No data available")})).catch((e=>{console.error(e)}))):console.log("No user detected"),t(!1)}),[]);const a=Fe(),n=q(),{client:s}=ue(),[i,c]=y.exports.useState([]),[r,l]=y.exports.useState(new Map),[d,m]=y.exports.useState(void 0),[p,u]=y.exports.useState(!1);var g;const E=(g=i.map((e=>({queryKey:["episodesByFeedId",e.id],queryFn:()=>async function(e){return(await s.episodesByFeedId(e,{max:10,fulltext:!0})).items}(e.id)}))),C(g)).flatMap((e=>e.isSuccess&&void 0!==e.data?e.data:[])).flat().sort((function(e,t){const a=e.datePublished,n=t.datePublished;return a===n?0:a<n?-1:1}));return o.createElement(Y,null,o.createElement("div",{className:a.container},o.createElement("header",{className:a.logo},o.createElement(D,{color:"primary",className:a.buttonPadding},o.createElement(U,{variant:"h6",component:"h1",className:a.headerText},"poochcaster"),o.createElement("img",{src:"/podcastClient/assets/cat.bd0d0283.svg",height:"24px",width:"auto",alt:"cat"}))),o.createElement("header",{className:a.header},o.createElement(x,{onClick:()=>n.goBack(),disabled:!Be(n)},o.createElement(Q,null)),o.createElement(x,{onClick:()=>n.goForward(),disabled:!1},o.createElement(X,null))),o.createElement("nav",{className:a.navigation},o.createElement(Ee,null)),o.createElement("main",{className:a.content},o.createElement(Z,null,o.createElement(_,{path:"/search/:term"},o.createElement(Ae,{subscriptions:i,setSubscriptions:c,playbackStates:r,activeEpisode:d,setActiveEpisode:m,isPlaying:p,setIsPlaying:u})),o.createElement(_,{path:"/search"},o.createElement(Ae,{subscriptions:i,setSubscriptions:c,playbackStates:r,activeEpisode:d,setActiveEpisode:m,isPlaying:p,setIsPlaying:u})),o.createElement(_,{exact:!0,path:"/feed"},o.createElement(Ie,{episodes:E,playbackStates:r,activeEpisode:d,setActiveEpisode:m,isPlaying:p,setIsPlaying:u})),o.createElement(_,{exact:!0,path:"/episode/:episodeId"},o.createElement(Se,{episodeId:void 0,playbackStates:r,activeEpisode:d,setActiveEpisode:m,isPlaying:p,setIsPlaying:u})),o.createElement(_,{exact:!0,path:"/subscriptions"},o.createElement(Ne,{subscriptions:i,setSubscriptions:c,playbackStates:r,activeEpisode:d,setActiveEpisode:m,isPlaying:p,setIsPlaying:u})),o.createElement(_,{exact:!0,path:"/settings"},o.createElement(Ce,null)),o.createElement(_,{exact:!0,path:"/podcast/:podcastId"},o.createElement(ke,{podcastId:void 0,subscriptions:i,setSubscriptions:c,playbackStates:r,activeEpisode:d,setActiveEpisode:m,isPlaying:p,setIsPlaying:u})))),o.createElement("footer",{className:a.controls},o.createElement(ye,{episodes:E,playbackStates:r,activeEpisode:d,subscriptions:i,isPlaying:p,setIsPlaying:u,setPlaybackStates:l,setActiveEpisode:m})),o.createElement("footer",{className:a.art},void 0!==d?o.createElement("img",{src:xe(d.image,d.feedImage),height:"56px",width:"auto",className:a.rounded}):o.createElement("img",{height:"56px",width:"56px",className:a.rounded}),o.createElement(G,{paddingLeft:"16px"},o.createElement(U,{gutterBottom:!0,variant:"subtitle2",component:"h6"},void 0!==d?d.title:""),o.createElement(U,{variant:"caption",color:"textSecondary",component:"p"},void 0!==d?function(e,t){const a=e.find((e=>e.id===t));return a?a.author:""}(i,d.feedId):"")))))}const Re=ee({palette:{primary:{main:te[700]},secondary:{main:ae[900]}}}),$e=new ne;se.render(o.createElement(o.StrictMode,null,o.createElement(Y,{basename:"/podcastClient"},o.createElement(oe,{client:$e},o.createElement(pe,null,o.createElement(ie,{theme:Re},o.createElement(Te,null)))))),document.getElementById("root"));
